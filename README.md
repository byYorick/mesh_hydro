# üåê Mesh Hydro System V2

**–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–∞—è mesh-—Å–∏—Å—Ç–µ–º–∞ –≥–∏–¥—Ä–æ–ø–æ–Ω–Ω–æ–≥–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å AI –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —É–∑–ª–∞**

## üéØ –û–ø–∏—Å–∞–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ –≤–∫–ª—é—á–∞–µ—Ç:
- **1√ó ROOT —É–∑–µ–ª** (ESP32-S3) - –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä mesh + MQTT
- **1√ó NODE Display** (ESP32-S3) - TFT —ç–∫—Ä–∞–Ω + LVGL
- **N√ó NODE pH/EC** (ESP32-S3) - –∫—Ä–∏—Ç–∏—á–Ω—ã–µ —É–∑–ª—ã —Å –∞–≤—Ç–æ–Ω–æ–º–∏–µ–π ‚ö†Ô∏è
- **N√ó NODE Climate** (ESP32) - –¥–∞—Ç—á–∏–∫–∏ –∫–ª–∏–º–∞—Ç–∞
- **1√ó NODE Relay** (ESP32) - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–æ—Ä—Ç–æ—á–∫–∞–º–∏ –∏ –≤–µ–Ω—Ç–∏–ª—è—Ü–∏–µ–π
- **N√ó NODE Water** (ESP32-C3) - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–æ–¥–æ–π
- **1√ó –í–µ–±-—Å–µ—Ä–≤–µ—Ä** (Laravel + Vue.js + PostgreSQL + Mosquitto)

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
mesh_hydro/
‚îú‚îÄ‚îÄ common/              # –û–±—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–ª—è –≤—Å–µ—Ö —É–∑–ª–æ–≤
‚îú‚îÄ‚îÄ root_node/           # ROOT –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä + AI_INSTRUCTIONS.md
‚îú‚îÄ‚îÄ node_display/        # –£–∑–µ–ª —Å TFT –¥–∏—Å–ø–ª–µ–µ–º + AI_INSTRUCTIONS.md
‚îú‚îÄ‚îÄ node_ph_ec/          # –£–∑–µ–ª pH/EC (–∫—Ä–∏—Ç–∏—á–Ω—ã–π) + AI_INSTRUCTIONS.md
‚îú‚îÄ‚îÄ node_climate/        # –£–∑–µ–ª –∫–ª–∏–º–∞—Ç–∞ + AI_INSTRUCTIONS.md
‚îú‚îÄ‚îÄ node_relay/          # –£–∑–µ–ª —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è + AI_INSTRUCTIONS.md
‚îú‚îÄ‚îÄ node_water/          # –£–∑–µ–ª –≤–æ–¥—ã + AI_INSTRUCTIONS.md
‚îú‚îÄ‚îÄ node_template/       # –®–∞–±–ª–æ–Ω + AI_INSTRUCTIONS.md
‚îú‚îÄ‚îÄ server/              # –í–µ–±-—Å–µ—Ä–≤–µ—Ä (Laravel + Vue.js)
‚îú‚îÄ‚îÄ doc/                 # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îî‚îÄ‚îÄ tools/               # –£—Ç–∏–ª–∏—Ç—ã
```

**üìñ –ü–æ–¥—Ä–æ–±–Ω–µ–µ:** [PROJECT_STRUCTURE.md](PROJECT_STRUCTURE.md)

## ü§ñ AI –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏

**‚ú® –ö–∞–∂–¥—ã–π —É–∑–µ–ª –∏–º–µ–µ—Ç —Å–≤–æ–π AI_INSTRUCTIONS.md —Ñ–∞–π–ª!**

### üìö –ò–Ω–¥–µ–∫—Å AI –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π:

- **[AI_INSTRUCTIONS.md](AI_INSTRUCTIONS.md)** - –û–±—â–∏–µ –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è –≤—Å–µ–π —Å–∏—Å—Ç–µ–º—ã
- **[AI_INSTRUCTIONS_INDEX.md](AI_INSTRUCTIONS_INDEX.md)** - –ò–Ω–¥–µ–∫—Å –≤—Å–µ—Ö AI –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π

### –ü–æ —É–∑–ª–∞–º:

| –£–∑–µ–ª | AI Instructions | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|------|-----------------|------------|
| **ROOT** | [root_node/AI_INSTRUCTIONS.md](root_node/AI_INSTRUCTIONS.md) | –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä mesh + MQTT (800 —Å—Ç—Ä–æ–∫) |
| **pH/EC** | [node_ph_ec/AI_INSTRUCTIONS.md](node_ph_ec/AI_INSTRUCTIONS.md) | **–ö–†–ò–¢–ò–ß–ù–´–ô** —É–∑–µ–ª —Å –∞–≤—Ç–æ–Ω–æ–º–∏–µ–π (1000 —Å—Ç—Ä–æ–∫) ‚ö†Ô∏è |
| **Display** | [node_display/AI_INSTRUCTIONS.md](node_display/AI_INSTRUCTIONS.md) | TFT + LVGL (300 —Å—Ç—Ä–æ–∫) |
| **Climate** | [node_climate/AI_INSTRUCTIONS.md](node_climate/AI_INSTRUCTIONS.md) | –î–∞—Ç—á–∏–∫–∏ –∫–ª–∏–º–∞—Ç–∞ (200 —Å—Ç—Ä–æ–∫) |
| **Relay** | [node_relay/AI_INSTRUCTIONS.md](node_relay/AI_INSTRUCTIONS.md) | –§–æ—Ä—Ç–æ—á–∫–∏ + –≤–µ–Ω—Ç–∏–ª—è—Ü–∏—è + PWM —Å–≤–µ—Ç (250 —Å—Ç—Ä–æ–∫) |
| **Water** | [node_water/AI_INSTRUCTIONS.md](node_water/AI_INSTRUCTIONS.md) | –ù–∞—Å–æ—Å—ã + –∫–ª–∞–ø–∞–Ω—ã (200 —Å—Ç—Ä–æ–∫) |
| **Template** | [node_template/AI_INSTRUCTIONS.md](node_template/AI_INSTRUCTIONS.md) | –®–∞–±–ª–æ–Ω –¥–ª—è –Ω–æ–≤—ã—Ö —É–∑–ª–æ–≤ (150 —Å—Ç—Ä–æ–∫) |

**–í—Å–µ–≥–æ:** ~2900 —Å—Ç—Ä–æ–∫ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö AI –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π!

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ common –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã —á–µ—Ä–µ–∑ `EXTRA_COMPONENT_DIRS`:

```c
// –í –ª—é–±–æ–º node –ø—Ä–æ—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–π:
#include "mesh_manager.h"
#include "mesh_protocol.h"
#include "node_config.h"
```

**üìñ –ü–æ–¥—Ä–æ–±–Ω–µ–µ:** [common/USAGE.md](common/USAGE.md)

### 2. –ü—Ä–æ—à–∏–≤–∫–∞ —É–∑–ª–æ–≤

**ROOT (ESP32-S3 #1):**
```bash
cd root_node
idf.py set-target esp32s3
idf.py menuconfig  # –ù–∞—Å—Ç—Ä–æ–∏—Ç—å WiFi SSID/Password
idf.py build
idf.py -p COM3 flash monitor
```

**NODE pH/EC (ESP32-S3 #3):**
```bash
cd node_ph_ec
idf.py set-target esp32s3
idf.py build
idf.py -p COM5 flash monitor
```

**–ü—Ä–æ—à–∏—Ç—å –≤—Å–µ —É–∑–ª—ã —Å—Ä–∞–∑—É:**
```bash
cd tools
./flash_all.bat   # Windows
./flash_all.sh    # Linux/Mac
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

```bash
# Backend (Laravel)
cd server/backend
composer install
cp .env.example .env
php artisan key:generate
php artisan migrate

# Frontend (Vue.js)
cd server/frontend
npm install
npm run dev

# MQTT Listener
php artisan mqtt:listen

# Telegram Bot
php artisan telegram:bot
```

**üìñ –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ:** [SETUP_GUIDE.md](SETUP_GUIDE.md)

## üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –û–±—â–∏–µ:
- **[README.md](README.md)** - –≠—Ç–æ—Ç —Ñ–∞–π–ª (–±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç)
- **[ARCHITECTURE.md](ARCHITECTURE.md)** - –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã
- **[SETUP_GUIDE.md](SETUP_GUIDE.md)** - –ü–æ–¥—Ä–æ–±–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞
- **[PROJECT_STRUCTURE.md](PROJECT_STRUCTURE.md)** - –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
- **[AI_INSTRUCTIONS.md](AI_INSTRUCTIONS.md)** - –û–±—â–∏–µ AI –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
- **[AI_INSTRUCTIONS_INDEX.md](AI_INSTRUCTIONS_INDEX.md)** - –ò–Ω–¥–µ–∫—Å –≤—Å–µ—Ö AI –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π

### –°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ:
- **[common/USAGE.md](common/USAGE.md)** - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ common –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- **–ö–∞–∂–¥—ã–π node/** –∏–º–µ–µ—Ç —Å–≤–æ–π `README.md` –∏ `AI_INSTRUCTIONS.md`

### –ò–∑ doc/:
- **[doc/MESH_HYDRO_V2_FINAL_PLAN.md](doc/MESH_HYDRO_V2_FINAL_PLAN.md)** - –î–µ—Ç–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω (1681 —Å—Ç—Ä–æ–∫–∞)
- **[doc/MESH_START_HERE.md](doc/MESH_START_HERE.md)** - –° —á–µ–≥–æ –Ω–∞—á–∞—Ç—å

## üîß –£—Ç–∏–ª–∏—Ç—ã (tools/)

- `flash_all.bat/sh` - –ü—Ä–æ—à–∏–≤–∫–∞ –≤—Å–µ—Ö —É–∑–ª–æ–≤
- `create_symlinks.bat/sh` - –°–æ–∑–¥–∞–Ω–∏–µ —Å–∏–º–ª–∏–Ω–∫–æ–≤ –Ω–∞ common
- `monitor_mesh.py` - –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ mesh-—Å–µ—Ç–∏
- `mqtt_tester.py` - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ MQTT
- `backup_restore.sh` - Backup/Restore –ë–î

**üìñ –ü–æ–¥—Ä–æ–±–Ω–µ–µ:** [tools/README.md](tools/README.md)

## ‚öôÔ∏è –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –î–ª—è —É–∑–ª–æ–≤ (ESP32):
- ESP-IDF v5.1+
- ESP32-S3 (3 —à—Ç) - ROOT, Display, pH/EC
- ESP32 (2 —à—Ç) - Climate, Relay
- ESP32-C3 (1 —à—Ç) - Water

### –î–ª—è —Å–µ—Ä–≤–µ—Ä–∞:
- PHP 8.1+
- Composer
- Node.js 18+
- PostgreSQL 15+
- Mosquitto MQTT Broker

## üéØ –°—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞

### ‚úÖ –ì–æ—Ç–æ–≤–æ:
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ —Å–æ–∑–¥–∞–Ω–∞ (~70+ —Ñ–∞–π–ª–æ–≤)
- Common –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (6 –º–æ–¥—É–ª–µ–π)
- ROOT —É–∑–µ–ª (4 –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞)
- 6 NODE —É–∑–ª–æ–≤ (–±–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞)
- –°–µ—Ä–≤–µ—Ä (–±–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞)
- AI –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ (~2900 —Å—Ç—Ä–æ–∫!)
- –£—Ç–∏–ª–∏—Ç—ã (5 –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤)
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (README –≤–æ –≤—Å–µ—Ö –ø–∞–ø–∫–∞—Ö)

### ‚è≥ –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ (–ø–æ —Ñ–∞–∑–∞–º):
1. ‚è≥ –ë–∞–∑–æ–≤–∞—è mesh-—Å–µ—Ç—å (3-4 –¥–Ω—è)
2. ‚è≥ ROOT —É–∑–µ–ª (3-4 –¥–Ω—è)
3. ‚è≥ –°–µ—Ä–≤–µ—Ä –±–∞–∑–æ–≤—ã–π (3-4 –¥–Ω—è)
4. ‚è≥ **NODE pH/EC (4-5 –¥–Ω–µ–π)** ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ù–û!
5. ‚è≥ Vue Dashboard (3-4 –¥–Ω—è)
6. ‚è≥ NODE Display (3-4 –¥–Ω—è)
7. ‚è≥ Climate + Relay (3-4 –¥–Ω—è)
8. ‚è≥ Water (2-3 –¥–Ω—è)
9. ‚è≥ Telegram + SMS (2-3 –¥–Ω—è)
10. ‚è≥ OTA —Å–∏—Å—Ç–µ–º–∞ (3-4 –¥–Ω—è)
11. ‚è≥ –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (1-2 –¥–Ω—è)
12. ‚è≥ Backup (1-2 –¥–Ω—è)
13. ‚è≥ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (2-3 –¥–Ω—è)
14. ‚è≥ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (3-5 –¥–Ω–µ–π)

**–û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞:** 36-51 –¥–µ–Ω—å (1.5-2 –º–µ—Å—è—Ü–∞)

## üèÜ –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- ‚úÖ **–ê–≤—Ç–æ–Ω–æ–º–Ω–∞—è —Ä–∞–±–æ—Ç–∞ pH/EC —É–∑–ª–æ–≤** - –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç —Ä–∞–±–æ—Ç—É –ø—Ä–∏ –ø–æ—Ç–µ—Ä–µ —Å–≤—è–∑–∏
- ‚úÖ **–†–µ–∑–µ—Ä–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –∫–ª–∏–º–∞—Ç–∞** - ROOT —É–ø—Ä–∞–≤–ª—è–µ—Ç –µ—Å–ª–∏ Climate offline
- ‚úÖ **OLED –Ω–∞ pH/EC —É–∑–ª–∞—Ö** - –ª–æ–∫–∞–ª—å–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- ‚úÖ **PWM –¥–∏–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–≤–µ—Ç–∞** - –ø–ª–∞–≤–Ω–∞—è —Ä–µ–≥—É–ª–∏—Ä–æ–≤–∫–∞ 0-100%
- ‚úÖ **OTA –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è** - –ø—Ä–æ—à–∏–≤–∫–∞ —á–µ—Ä–µ–∑ mesh –∏–ª–∏ HTTP
- ‚úÖ **Telegram + SMS —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** - –∫—Ä–∏—Ç–∏—á–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è
- ‚úÖ **Ring buffer 1000 –∑–∞–ø–∏—Å–µ–π** - –±—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏—è –ø—Ä–∏ offline
- ‚úÖ **AI –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —É–∑–ª–∞** - –¥–µ—Ç–∞–ª—å–Ω—ã–µ –≥–∞–π–¥—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License

---

## ü§ù –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

### –†–∞–±–æ—Ç–∞–µ—à—å –Ω–∞–¥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º —É–∑–ª–æ–º?
1. –û—Ç–∫—Ä–æ–π –µ–≥–æ **AI_INSTRUCTIONS.md**
2. –°–ª–µ–¥—É–π –∫—Ä–∏—Ç–∏—á–Ω—ã–º –ø—Ä–∞–≤–∏–ª–∞–º
3. –ò—Å–ø–æ–ª—å–∑—É–π –ø—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞
4. –ü—Ä–æ–≤–µ—Ä—è–π —á–µ–∫-–ª–∏—Å—Ç—ã

### –°–æ–∑–¥–∞–µ—à—å –Ω–æ–≤—ã–π —É–∑–µ–ª?
1. –°–∫–æ–ø–∏—Ä—É–π **node_template/**
2. –ß–∏—Ç–∞–π **node_template/AI_INSTRUCTIONS.md**
3. –ê–¥–∞–ø—Ç–∏—Ä—É–π –ø–æ–¥ —Å–≤–æ–∏ –Ω—É–∂–¥—ã

### –ù—É–∂–Ω–∞ –ø–æ–º–æ—â—å?
- –û–±—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã ‚Üí `AI_INSTRUCTIONS.md`
- –°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã ‚Üí `node_xxx/AI_INSTRUCTIONS.md`
- –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ ‚Üí `ARCHITECTURE.md`
- –£—Å—Ç–∞–Ω–æ–≤–∫–∞ ‚Üí `SETUP_GUIDE.md`

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 17 –æ–∫—Ç—è–±—Ä—è 2025  
**–í–µ—Ä—Å–∏—è:** 2.0  
**–°—Ç–∞—Ç—É—Å:** –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ –≥–æ—Ç–æ–≤–∞, –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

**–ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ!** üöÄ
