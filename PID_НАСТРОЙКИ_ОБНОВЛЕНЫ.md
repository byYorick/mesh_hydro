# PID –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–±–Ω–æ–≤–ª–µ–Ω—ã –Ω–∞ –∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã–µ ‚úÖ

**–î–∞—Ç–∞:** 21.10.2025  
**–°—Ç–∞—Ç—É—Å:** –û–±–Ω–æ–≤–ª–µ–Ω–æ –≤ –æ–±–µ–∏—Ö –Ω–æ–¥–∞—Ö

---

## üéØ –ß—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–æ

### NODE pH - –ö–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

**–ë—ã–ª–æ (–∞–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–µ):**
```c
Kp = 2.0
Ki = 0.1
Kd = 0.5
```

**–°—Ç–∞–ª–æ (–∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã–µ):**
```c
Kp = 1.0   // –°–Ω–∏–∂–µ–Ω–æ –≤ 2 —Ä–∞–∑–∞
Ki = 0.05  // –°–Ω–∏–∂–µ–Ω–æ –≤ 2 —Ä–∞–∑–∞
Kd = 0.3   // –°–Ω–∏–∂–µ–Ω–æ –Ω–∞ 40%
```

### NODE EC - –ö–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

**–ë—ã–ª–æ (–∞–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–µ):**
```c
Kp = 1.5
Ki = 0.05
Kd = 0.3
```

**–°—Ç–∞–ª–æ (–∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã–µ):**
```c
Kp = 0.8   // –°–Ω–∏–∂–µ–Ω–æ –ø–æ—á—Ç–∏ –≤–¥–≤–æ–µ
Ki = 0.02  // –°–Ω–∏–∂–µ–Ω–æ –≤ 2.5 —Ä–∞–∑–∞
Kd = 0.2   // –°–Ω–∏–∂–µ–Ω–æ –Ω–∞ 33%
```

---

## üìä –ü–æ—á–µ–º—É –∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏?

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:

1. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** üõ°Ô∏è
   - –ú–µ–Ω—å—à–µ —Ä–∏—Å–∫ –ø–µ—Ä–µ–ª–∏–≤–∞ —Ö–∏–º–∏–∫–∞—Ç–æ–≤
   - –ü–ª–∞–≤–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è pH/EC
   - –ú–µ–Ω—å—à–µ —Å—Ç—Ä–µ—Å—Å –¥–ª—è —Ä–∞—Å—Ç–µ–Ω–∏–π

2. **–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å** üìà
   - –ú–µ–Ω—å—à–µ –∫–æ–ª–µ–±–∞–Ω–∏–π (oscillations)
   - –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ overshoot
   - –ü—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ

3. **–ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫** üöÄ
   - –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π —Å—Ç–∞—Ä—Ç —Å–∏—Å—Ç–µ–º—ã
   - –í—Ä–µ–º—è –Ω–∞ –Ω–∞–±–ª—é–¥–µ–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫—É
   - –ú–µ–Ω—å—à–µ –æ—à–∏–±–æ–∫ –ø—Ä–∏ –∫–∞–ª–∏–±—Ä–æ–≤–∫–µ

### –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:

1. **–ú–µ–¥–ª–µ–Ω–Ω–∞—è —Ä–µ–∞–∫—Ü–∏—è** ‚è±Ô∏è
   - –î–æ–ª—å—à–µ –¥–æ—Å—Ç–∏–≥–∞–µ—Ç—Å—è target
   - –ú–æ–∂–µ—Ç –Ω–µ —É—Å–ø–µ—Ç—å –ø—Ä–∏ –±—ã—Å—Ç—Ä—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö

2. **–ù–µ–ø–æ–ª–Ω–∞—è –∫–æ—Ä—Ä–µ–∫—Ü–∏—è** üìâ
   - –í–æ–∑–º–æ–∂–Ω–∞ –æ—Å—Ç–∞—Ç–æ—á–Ω–∞—è –æ—à–∏–±–∫–∞
   - –¢—Ä–µ–±—É–µ—Ç—Å—è –±–æ–ª—å—à–µ –≤—Ä–µ–º–µ–Ω–∏

---

## üîß –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏?

–ü–æ—Å–ª–µ —Å—Ç–∞–±–∏–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã –Ω–∞ –∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö (1-2 –Ω–µ–¥–µ–ª–∏), –º–æ–∂–Ω–æ –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ —É–≤–µ–ª–∏—á–∏–≤–∞—Ç—å –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã:

### –®–∞–≥ 1: –£–≤–µ–ª–∏—á–∏—Ç—å Kp –Ω–∞ 25%
```c
// pH
Kp = 1.25 (–±—ã–ª–æ 1.0)

// EC
Kp = 1.0 (–±—ã–ª–æ 0.8)
```

### –®–∞–≥ 2: –£–≤–µ–ª–∏—á–∏—Ç—å Ki –Ω–∞ 50%
```c
// pH
Ki = 0.075 (–±—ã–ª–æ 0.05)

// EC
Ki = 0.03 (–±—ã–ª–æ 0.02)
```

### –®–∞–≥ 3: –£–≤–µ–ª–∏—á–∏—Ç—å Kd –Ω–∞ 25%
```c
// pH
Kd = 0.375 (–±—ã–ª–æ 0.3)

// EC
Kd = 0.25 (–±—ã–ª–æ 0.2)
```

**–í–∞–∂–Ω–æ:** –ò–∑–º–µ–Ω—è–π—Ç–µ –ø–æ –æ–¥–Ω–æ–º—É –ø–∞—Ä–∞–º–µ—Ç—Ä—É –∑–∞ —Ä–∞–∑ –∏ –Ω–∞–±–ª—é–¥–∞–π—Ç–µ 2-3 –¥–Ω—è.

---

## üìù –ö–∞–∫ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –≤—Ä—É—á–Ω—É—é?

–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ NVS –∏ –º–æ–≥—É—Ç –±—ã—Ç—å –∏–∑–º–µ–Ω–µ–Ω—ã:

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
(–∫–æ–≥–¥–∞ –±—É–¥–µ—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω backend/frontend)

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ MQTT –∫–æ–º–∞–Ω–¥—É
```json
{
  "type": "config",
  "node_id": "ph_XXXXXX",
  "params": {
    "pump_pid": {
      "0": {"kp": 1.5, "ki": 0.08, "kd": 0.4}
    }
  }
}
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ firmware
–ò–∑–º–µ–Ω–∏—Ç—å –≤ `node_ph/main/app_main.c` –∏–ª–∏ `node_ec/main/app_main.c`:
```c
s_node_config.pump_pid[i].kp = 1.5f;  // –í–∞—à–µ –∑–Ω–∞—á–µ–Ω–∏–µ
s_node_config.pump_pid[i].ki = 0.08f; // –í–∞—à–µ –∑–Ω–∞—á–µ–Ω–∏–µ
s_node_config.pump_pid[i].kd = 0.4f;  // –í–∞—à–µ –∑–Ω–∞—á–µ–Ω–∏–µ
```

–ó–∞—Ç–µ–º –ø–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –∏ –ø—Ä–æ—à–∏—Ç—å.

---

## üß™ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### 1. –ó–∞–ø—É—Å–∫ –Ω–∞ –∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã—Ö (—Ç–µ–∫—É—â–∏–µ)
- –†–∞–±–æ—Ç–∞ 1-2 –Ω–µ–¥–µ–ª–∏
- –ù–∞–±–ª—é–¥–µ–Ω–∏–µ –∑–∞ –ø–æ–≤–µ–¥–µ–Ω–∏–µ–º
- –°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö

### 2. –ê–Ω–∞–ª–∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- –ï—Å—Ç—å –ª–∏ overshoot?
- –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ª–∏ –±—ã—Å—Ç—Ä–∞—è —Ä–µ–∞–∫—Ü–∏—è?
- –ï—Å—Ç—å –ª–∏ oscillations?

### 3. –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
- –£–≤–µ–ª–∏—á–∏–≤–∞—Ç—å –ø–æ –æ–¥–Ω–æ–º—É –ø–∞—Ä–∞–º–µ—Ç—Ä—É
- –ù–∞–±–ª—é–¥–∞—Ç—å 2-3 –¥–Ω—è
- –ó–∞–ø–∏—Å—ã–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### 4. –û–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- –ö–æ–≥–¥–∞ –Ω–∞–π–¥–µ–Ω—ã –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ - —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å
- –ó–∞–ø–∏—Å–∞—Ç—å –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞–∫ reference

---

## üìç –ì–¥–µ –æ–±–Ω–æ–≤–ª–µ–Ω–æ

‚úÖ **–ö–æ–¥:**
- `node_ph/main/app_main.c` - —Ñ—É–Ω–∫—Ü–∏—è `init_default_config()`
- `node_ec/main/app_main.c` - —Ñ—É–Ω–∫—Ü–∏—è `init_default_config()`

‚úÖ **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
- `node_ph/README.md`
- `node_ph/AI_INSTRUCTIONS.md`
- `node_ph/READY_TO_BUILD.md`
- `node_ec/README.md`
- `node_ec/AI_INSTRUCTIONS.md`
- `node_ec/READY_TO_BUILD.md`
- `SPLIT_NODES_SUMMARY.md`
- `–†–ê–ó–î–ï–õ–ï–ù–ò–ï_–ù–û–î_–ó–ê–í–ï–†–®–ï–ù–û.md`

---

## üéì –¢–µ–æ—Ä–∏—è PID

### Kp (–ü—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π)
- –ß–µ–º –±–æ–ª—å—à–µ ‚Üí –±—ã—Å—Ç—Ä–µ–µ —Ä–µ–∞–∫—Ü–∏—è, –Ω–æ –±–æ–ª—å—à–µ overshoot
- –ß–µ–º –º–µ–Ω—å—à–µ ‚Üí –º–µ–¥–ª–µ–Ω–Ω–µ–µ, –Ω–æ —Å—Ç–∞–±–∏–ª—å–Ω–µ–µ

### Ki (–ò–Ω—Ç–µ–≥—Ä–∞–ª—å–Ω—ã–π)
- –ß–µ–º –±–æ–ª—å—à–µ ‚Üí –±—ã—Å—Ç—Ä–µ–µ —É—Å—Ç—Ä–∞–Ω—è–µ—Ç –æ—Å—Ç–∞—Ç–æ—á–Ω—É—é –æ—à–∏–±–∫—É
- –ß–µ–º –º–µ–Ω—å—à–µ ‚Üí –º–µ–¥–ª–µ–Ω–Ω–µ–µ, –Ω–æ –º–µ–Ω—å—à–µ —Ä–∏—Å–∫ –Ω–∞–∫–æ–ø–ª–µ–Ω–∏—è

### Kd (–î–∏—Ñ—Ñ–µ—Ä–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π)
- –ß–µ–º –±–æ–ª—å—à–µ ‚Üí –±–æ–ª—å—à–µ –¥–µ–º–ø—Ñ–∏—Ä–æ–≤–∞–Ω–∏–µ oscillations
- –ß–µ–º –º–µ–Ω—å—à–µ ‚Üí —Å–∏—Å—Ç–µ–º–∞ –±–æ–ª–µ–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–∞ –∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º

---

**–ö–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã!** üéØ  
**–ë–µ–∑–æ–ø–∞—Å–Ω—ã–π –∑–∞–ø—É—Å–∫ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω!** üõ°Ô∏è

