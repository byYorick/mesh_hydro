# üéØ NODE Climate - –ì–û–¢–û–í –ö –ü–†–û–®–ò–í–ö–ï!

## ‚úÖ –°—Ç–∞—Ç—É—Å: –ü–û–õ–ù–û–°–¢–¨–Æ –ì–û–¢–û–í

**–î–∞—Ç–∞ —Å–±–æ—Ä–∫–∏**: 18.10.2025, –æ–±–Ω–æ–≤–ª–µ–Ω–æ –ø–æ—Å–ª–µ –≤—Å–µ—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π  
**–í–µ—Ä—Å–∏—è ESP-IDF**: v5.5  
**Target**: ESP32  
**–†–∞–∑–º–µ—Ä**: 1.04 –ú–ë / 1.5 –ú–ë (32% —Å–≤–æ–±–æ–¥–Ω–æ)  

---

## üöÄ –ë–´–°–¢–†–´–ô –°–¢–ê–†–¢

### 1. –ü—Ä–æ—à–∏–≤–∫–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞:
```bash
.\flash.bat COM4
```
(–∑–∞–º–µ–Ω–∏—Ç–µ COM4 –Ω–∞ –≤–∞—à –ø–æ—Ä—Ç)

### 2. –û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:
```
I CLIMATE: === NODE Climate Starting ===
I CLIMATE: [Step 1/7] Initializing NVS...
I CLIMATE: [Step 2/7] Loading configuration...
I CLIMATE: [Step 3/7] Initializing I2C...
I CLIMATE: [Step 4/7] Initializing Sensors...
W CLIMATE:    WARNING: SHT3x init failed (–¥–∞—Ç—á–∏–∫ –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω)
W CLIMATE:    WARNING: CCS811 init failed (–¥–∞—Ç—á–∏–∫ –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω)  
W CLIMATE:    WARNING: Lux sensor init failed (–¥–∞—Ç—á–∏–∫ –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω)
W CLIMATE: WARNING: All sensors failed. Running in degraded mode.
I CLIMATE: [Step 5/7] Initializing Mesh (NODE mode)...
I mesh_manager: NODE mode (router: 'Yorick', max_conn=6)
I CLIMATE: Mesh started
I CLIMATE: [Step 6/7] Initializing Climate Controller...
I CLIMATE: [Step 7/7] Starting Climate Controller...
I CLIMATE: === NODE Climate READY ===
```

### 3. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –¥–∞—Ç—á–∏–∫–æ–≤ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):
- –ü–æ–¥–∫–ª—é—á–∏—Ç–µ SHT3x, CCS811, Lux –∫ I2C
- –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ ESP32
- WARNING –∏—Å—á–µ–∑–Ω—É—Ç, –ø–æ—è–≤–∏—Ç—Å—è "OK"

---

## üì° –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Mesh

```
Mesh ID:       HYDRO1
Mesh Password: hydro_mesh_2025
WiFi Channel:  1
Router:        Yorick / pro100parol
Max Nodes:     6 –¥–æ—á–µ—Ä–Ω–∏—Ö —É–∑–ª–æ–≤
```

‚ö†Ô∏è **ROOT —É–∑–µ–ª –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å –ò–î–ï–ù–¢–ò–ß–ù–´–ï –Ω–∞—Å—Ç—Ä–æ–π–∫–∏!**

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### –ü–æ—Å–ª–µ –ø—Ä–æ—à–∏–≤–∫–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

1. ‚úÖ **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞** - "NODE Climate READY"
2. ‚úÖ **Mesh –∑–∞–ø—É—â–µ–Ω** - "Mesh started"
3. ‚ö†Ô∏è **–î–∞—Ç—á–∏–∫–∏** - –º–æ–≥—É—Ç –±—ã—Ç—å WARNING (—ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –±–µ–∑ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è)
4. üîÑ **–û–∂–∏–¥–∞–Ω–∏–µ ROOT** - —É–∑–µ–ª –±—É–¥–µ—Ç –∏—Å–∫–∞—Ç—å ROOT –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

### –ö–æ–≥–¥–∞ ROOT –ø–æ—è–≤–∏—Ç—Å—è:
```
I mesh: <MESH_EVENT_PARENT_CONNECTED>
I mesh: layer:2, rtableSize:1, <1001>
I mesh_manager: Mesh connected (layer: 2)
```

### –û—Ç–ø—Ä–∞–≤–∫–∞ —Ç–µ–ª–µ–º–µ—Ç—Ä–∏–∏ (–∫–∞–∂–¥—ã–µ 10 —Å–µ–∫):
```
W climate_ctrl: SHT3x read failed - using default values
W climate_ctrl: CCS811 read failed - using default value
W climate_ctrl: Lux sensor read failed - using default value
W climate_ctrl: All sensors failed - skipping telemetry
```
(–ò–ª–∏ –ø–æ–ª–Ω–∞—è —Ç–µ–ª–µ–º–µ—Ç—Ä–∏—è –µ—Å–ª–∏ –¥–∞—Ç—á–∏–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω—ã)

---

## üêõ –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### "All sensors failed"
- ‚úÖ **–≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ** –µ—Å–ª–∏ –¥–∞—Ç—á–∏–∫–∏ –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω—ã
- ‚ö†Ô∏è –ü–æ–¥–∫–ª—é—á–∏—Ç–µ –¥–∞—Ç—á–∏–∫–∏ –∫ I2C (GPIO17=SCL, GPIO18=SDA)
- üîÑ –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ ESP32

### "Mesh offline"
- ‚ö†Ô∏è ROOT —É–∑–µ–ª –Ω–µ –∑–∞–ø—É—â–µ–Ω
- ‚ö†Ô∏è –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ mesh credentials
- üîÑ –ó–∞–ø—É—Å—Ç–∏—Ç–µ ROOT —É–∑–µ–ª —Å —Ç–µ–º–∏ –∂–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏

### "Router not found"
- ‚ö†Ô∏è WiFi "Yorick" –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
- ‚ö†Ô∏è –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–∞—Ä–æ–ª—å
- üîß –ò—Å–ø—Ä–∞–≤—å—Ç–µ –≤ `main/app_main.c` –∏ –ø–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ

---

## üì¶ –§–∞–π–ª—ã –¥–ª—è –ø—Ä–æ—à–∏–≤–∫–∏

–ù–∞—Ö–æ–¥—è—Ç—Å—è –≤ `build/`:
- `bootloader/bootloader.bin` (0x1000)
- `partition_table/partition-table.bin` (0x8000)
- `node_climate.bin` (0x10000)

---

## üéØ –°–ª–µ–¥—É—é—â–∏–µ –¥–µ–π—Å—Ç–≤–∏—è

1. ‚úÖ **–ü—Ä–æ—à–µ–π—Ç–µ ESP32**: `.\flash.bat COM4`
2. ‚úÖ **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏** –≤ –º–æ–Ω–∏—Ç–æ—Ä–µ
3. ‚úÖ **–ó–∞–ø—É—Å—Ç–∏—Ç–µ ROOT —É–∑–µ–ª** (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É–∂–µ –∑–∞–ø—É—â–µ–Ω!)
4. ‚è≥ **–î–æ–∂–¥–∏—Ç–µ—Å—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è** –∫ mesh
5. üìä **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–µ–ª–µ–º–µ—Ç—Ä–∏—é** –Ω–∞ ROOT/MQTT
6. üîå **–ü–æ–¥–∫–ª—é—á–∏—Ç–µ –¥–∞—Ç—á–∏–∫–∏** (–ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏)

---

**–ü–†–û–ï–ö–¢ –ü–û–õ–ù–û–°–¢–¨–Æ –ì–û–¢–û–í –ö –†–ê–ë–û–¢–ï!** üöÄ

–í—Å—è mesh-–∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞, –¥–∞—Ç—á–∏–∫–∏ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã.  
–£–∑–µ–ª —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ degraded mode –±–µ–∑ –¥–∞—Ç—á–∏–∫–æ–≤ –∏ –ø–æ–ª–Ω–æ–º —Ä–µ–∂–∏–º–µ —Å –Ω–∏–º–∏.

