# ğŸ“º NODE DISPLAY - Ğ Ğ•ĞĞ›Ğ˜Ğ—ĞĞ¦Ğ˜Ğ¯ Ğ“ĞĞ¢ĞĞ’Ğ!

**Ğ”Ğ°Ñ‚Ğ°:** 19 Ğ¾ĞºÑ‚ÑĞ±Ñ€Ñ 2025  
**Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ:** âœ… Ğ‘Ğ°Ğ·Ğ¾Ğ²Ğ°Ñ Ğ²ĞµÑ€ÑĞ¸Ñ (ĞºĞ¾Ğ½ÑĞ¾Ğ»ÑŒĞ½Ñ‹Ğ¹ dashboard)

---

## ğŸ¯ Ğ§Ğ¢Ğ Ğ Ğ•ĞĞ›Ğ˜Ğ—ĞĞ’ĞĞĞ

### âœ… Ğ’ĞµÑ€ÑĞ¸Ñ 1.0 (Console Dashboard):

- [x] **Mesh Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ** (NODE Ñ€ĞµĞ¶Ğ¸Ğ¼, Layer 2)
- [x] **REQUEST Ğ¿Ñ€Ğ¾Ñ‚Ğ¾ĞºĞ¾Ğ»** (Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ñƒ ROOT ĞºĞ°Ğ¶Ğ´Ñ‹Ğµ 5 ÑĞµĞº)
- [x] **RESPONSE Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ°** (Ğ¿Ğ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ²ÑĞµÑ… ÑƒĞ·Ğ»Ğ¾Ğ²)
- [x] **ĞšÑÑˆĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ** (Ğ»Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ¾Ğµ Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ğ´Ğ¾ 10 ÑƒĞ·Ğ»Ğ¾Ğ²)
- [x] **Heartbeat** (ĞºĞ°Ğ¶Ğ´Ñ‹Ğµ 10 ÑĞµĞº Ñ MAC Ğ°Ğ´Ñ€ĞµÑĞ¾Ğ¼)
- [x] **Console Dashboard** (Ñ‚ĞµĞºÑÑ‚Ğ¾Ğ²Ñ‹Ğ¹ Ğ²Ñ‹Ğ²Ğ¾Ğ´ Ğ² Ğ¼Ğ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€)
- [x] **GPIO ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ** (Ğ¸Ğ· hydro1.0)
- [x] **ESP32-S3 Ñ PSRAM** (Ğ³Ğ¾Ñ‚Ğ¾Ğ² Ğ´Ğ»Ñ LVGL)

### â³ Ğ’ĞµÑ€ÑĞ¸Ñ 2.0 (TFT Dashboard) - TODO:

- [ ] **LCD Driver** (ILI9341 SPI)
- [ ] **LVGL Port** (Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ Ñ ESP32-S3)
- [ ] **Encoder Driver** (Ñ€Ğ¾Ñ‚Ğ°Ñ†Ğ¸Ğ¾Ğ½Ğ½Ñ‹Ğ¹ ÑĞ½ĞºĞ¾Ğ´ĞµÑ€ + ĞºĞ½Ğ¾Ğ¿ĞºĞ°)
- [ ] **UI Screens** (Dashboard, NodeDetail, Settings)
- [ ] **Touchscreen** (Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾ - XPT2046)

---

## ğŸ“Š ĞšĞĞĞ¡ĞĞ›Ğ¬ĞĞ«Ğ™ DASHBOARD

### ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ Ğ²Ñ‹Ğ²Ğ¾Ğ´Ğ° (ĞºĞ°Ğ¶Ğ´Ñ‹Ğµ 10 ÑĞµĞºÑƒĞ½Ğ´):

```
I (25000) DISPLAY: 
I (25000) DISPLAY: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
I (25000) DISPLAY: â•‘      ğŸŒ¿ HYDRO MESH DASHBOARD (Display)           â•‘
I (25000) DISPLAY: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
I (25000) DISPLAY: â•‘  Cached nodes: 3                                  â•‘
I (25000) DISPLAY: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
I (25000) DISPLAY: â•‘                                                   â•‘
I (25000) DISPLAY: â•‘  ğŸŸ¢ climate_001 (climate)                         â•‘
I (25000) DISPLAY: â•‘     Data: {"temperature":22.8,"humidity":60,"co2":493,"lux":576} â•‘
I (25000) DISPLAY: â•‘                                                   â•‘
I (25000) DISPLAY: â•‘  ğŸŸ¢ ph_ec_001 (ph_ec)                             â•‘
I (25000) DISPLAY: â•‘     Data: {"ph":6.5,"ec":2.5,"temperature":22.5} â•‘
I (25000) DISPLAY: â•‘                                                   â•‘
I (25000) DISPLAY: â•‘  ğŸŸ¢ root_98a316f5fde8 (root)                      â•‘
I (25000) DISPLAY: â•‘     Data: {"mqtt_online":true,"nodes_count":3}   â•‘
I (25000) DISPLAY: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
I (25000) DISPLAY: â•‘  Heap: 3500000 bytes                              â•‘
I (25000) DISPLAY: â•‘  RSSI to parent: -42 dBm                          â•‘
I (25000) DISPLAY: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (25000) DISPLAY: 
```

---

## ğŸ”Œ GPIO Ğ ĞĞ¡ĞŸĞ˜ĞĞĞ’ĞšĞ

### LCD ILI9341 (SPI):

| GPIO | ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ | ĞŸÑ€Ğ¸Ğ¼ĞµÑ‡Ğ°Ğ½Ğ¸Ğµ |
|------|------------|------------|
| 11 | MOSI | SPI Master Out |
| 12 | SCLK | SPI Clock (40 MHz) |
| 10 | CS | Chip Select |
| 9 | DC | Data/Command |
| 14 | RST | Reset |
| 15 | Backlight | PWM 0-100% |

### Ğ Ğ¾Ñ‚Ğ°Ñ†Ğ¸Ğ¾Ğ½Ğ½Ñ‹Ğ¹ ÑĞ½ĞºĞ¾Ğ´ĞµÑ€:

| GPIO | ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ | ĞŸÑ€Ğ¸Ğ¼ĞµÑ‡Ğ°Ğ½Ğ¸Ğµ |
|------|------------|------------|
| 4 | CLK (A) | Quadrature A |
| 5 | DT (B) | Quadrature B |
| 6 | SW | Button (active low) |

---

## ğŸ“¨ ĞŸĞ ĞĞ¢ĞĞšĞĞ› ĞĞ‘ĞœĞ•ĞĞ

### 1. REQUEST (Display â†’ ROOT) ĞºĞ°Ğ¶Ğ´Ñ‹Ğµ 5 ÑĞµĞº:

```json
{
  "type": "request",
  "from": "display_001",
  "request": "all_nodes_data"
}
```

**ĞšĞ¾Ğ´:**
```c
static void send_request_all_nodes(void) {
    char json_buf[256];
    if (mesh_protocol_create_request(s_config.base.node_id, "all_nodes_data",
                                      json_buf, sizeof(json_buf))) {
        mesh_manager_send_to_root((uint8_t *)json_buf, strlen(json_buf));
    }
}
```

---

### 2. RESPONSE (ROOT â†’ Display):

```json
{
  "type": "response",
  "to": "display_001",
  "data": {
    "nodes": [
      {
        "node_id": "climate_001",
        "node_type": "climate",
        "online": true,
        "data": {
          "temperature": 22.8,
          "humidity": 60,
          "co2": 493,
          "lux": 576
        }
      },
      {
        "node_id": "ph_ec_001",
        "node_type": "ph_ec",
        "online": true,
        "data": {
          "ph": 6.5,
          "ec": 2.5,
          "temperature": 22.5
        }
      }
    ]
  }
}
```

**ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ°:**
```c
case MESH_MSG_RESPONSE: {
    ESP_LOGI(TAG, "ğŸ“¥ RESPONSE from ROOT received!");
    
    cJSON *nodes = cJSON_GetObjectItem(msg.data, "nodes");
    if (nodes && cJSON_IsArray(nodes)) {
        update_cache(nodes);  // Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ğ² Ğ»Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ñ‹Ğ¹ ĞºÑÑˆ
        // UI Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑÑ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸
    }
    break;
}
```

---

### 3. HEARTBEAT (Display â†’ ROOT) ĞºĞ°Ğ¶Ğ´Ñ‹Ğµ 10 ÑĞµĞº:

```json
{
  "type": "heartbeat",
  "node_id": "display_001",
  "mac_address": "A4:CF:12:XX:XX:XX",
  "uptime": 120,
  "heap_free": 3500000,
  "rssi_to_parent": -42
}
```

---

## ğŸ§ª Ğ¢Ğ•Ğ¡Ğ¢Ğ˜Ğ ĞĞ’ĞĞĞ˜Ğ•

### Ğ¨Ğ°Ğ³ 1: ĞšĞ¾Ğ¼Ğ¿Ğ¸Ğ»ÑÑ†Ğ¸Ñ (ÑĞµĞ¹Ñ‡Ğ°Ñ):

```batch
cd node_display
C:\Espressif\idf_cmd_init.bat esp-idf-1dcc643656a1439837fdf6ab63363005
idf.py fullclean
idf.py build
```

---

### Ğ¨Ğ°Ğ³ 2: ĞŸÑ€Ğ¾ÑˆĞ¸Ğ²ĞºĞ° (Ğ¿Ğ¾ÑĞ»Ğµ ĞºĞ¾Ğ¼Ğ¿Ğ¸Ğ»ÑÑ†Ğ¸Ğ¸):

```batch
idf.py -p COM8 flash monitor
```

**Ğ—Ğ°Ğ¼ĞµĞ½Ğ¸ COM8 Ğ½Ğ° Ñ‚Ğ²Ğ¾Ğ¹ Ğ¿Ğ¾Ñ€Ñ‚!**

---

### Ğ¨Ğ°Ğ³ 3: ĞĞ¶Ğ¸Ğ´Ğ°ĞµĞ¼Ñ‹Ğµ Ğ»Ğ¾Ğ³Ğ¸:

```
I (1000) DISPLAY: === NODE Display Starting ===
I (1200) DISPLAY: [Step 1/6] Initializing NVS...
I (1250) DISPLAY: [Step 2/6] Loading configuration...
I (1300) DISPLAY: Loaded: display_001 (Main Interface)
I (1350) DISPLAY: [Step 3/6] Initializing cache...
I (1400) DISPLAY: [Step 4/6] Initializing LCD... (TODO)
W (1450) DISPLAY:   âš ï¸ LCD DRIVER NOT IMPLEMENTED YET!
W (1500) DISPLAY:   âš ï¸ Using CONSOLE OUTPUT for now
I (1550) DISPLAY: [Step 5/6] Initializing Encoder... (TODO)
W (1600) DISPLAY:   âš ï¸ ENCODER DRIVER NOT IMPLEMENTED YET!
I (1650) DISPLAY: [Step 6/6] Initializing Mesh (NODE mode)...
I (5000) mesh_manager: âœ“ MESH Parent connected!
I (5005) mesh_manager: Layer: 2
I (10000) DISPLAY: Request task running (every 5 sec)
I (10500) DISPLAY: Heartbeat task running (every 10 sec)
I (11000) DISPLAY: Display task running (console output every 10 sec)
I (15000) DISPLAY: ğŸ” Data request sent to ROOT
I (15200) DISPLAY: ğŸ“¥ RESPONSE from ROOT received!
I (15210) DISPLAY:    Response contains 3 nodes
I (15220) DISPLAY:    Cache updated (3 nodes)
I (25000) DISPLAY: 
I (25000) DISPLAY: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
I (25000) DISPLAY: â•‘      ğŸŒ¿ HYDRO MESH DASHBOARD (Display)           â•‘
I (25000) DISPLAY: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
I (25000) DISPLAY: â•‘  Cached nodes: 3                                  â•‘
I (25000) DISPLAY: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
I (25000) DISPLAY: â•‘                                                   â•‘
I (25000) DISPLAY: â•‘  ğŸŸ¢ climate_001 (climate)                         â•‘
I (25000) DISPLAY: â•‘     Data: {"temperature":22.8,"humidity":60}     â•‘
I (25000) DISPLAY: â•‘                                                   â•‘
I (25000) DISPLAY: â•‘  ğŸŸ¢ ph_ec_001 (ph_ec)                             â•‘
I (25000) DISPLAY: â•‘     Data: {"ph":6.5,"ec":2.5}                    â•‘
I (25000) DISPLAY: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

## ğŸ“‹ Ğ¡Ğ¢ĞĞ¢Ğ£Ğ¡ Ğ Ğ•ĞĞ›Ğ˜Ğ—ĞĞ¦Ğ˜Ğ˜

### âœ… Ğ“ĞĞ¢ĞĞ’Ğ (Console Ğ²ĞµÑ€ÑĞ¸Ñ):

| ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚ | Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ | ĞŸÑ€Ğ¸Ğ¼ĞµÑ‡Ğ°Ğ½Ğ¸Ğµ |
|-----------|--------|------------|
| app_main.c | âœ… | NODE Ñ€ĞµĞ¶Ğ¸Ğ¼, REQUEST/RESPONSE |
| CMakeLists.txt | âœ… | Ğ¡ÑÑ‹Ğ»ĞºĞ¸ Ğ½Ğ° common ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹ |
| sdkconfig.defaults | âœ… | ESP32-S3 Ñ PSRAM |
| Mesh integration | âœ… | NODE mode, callback |
| Request logic | âœ… | ĞšĞ°Ğ¶Ğ´Ñ‹Ğµ 5 ÑĞµĞº |
| Heartbeat | âœ… | ĞšĞ°Ğ¶Ğ´Ñ‹Ğµ 10 ÑĞµĞº Ñ MAC |
| Cache | âœ… | Ğ”Ğ¾ 10 ÑƒĞ·Ğ»Ğ¾Ğ² |
| Console dashboard | âœ… | Ğ¢ĞµĞºÑÑ‚Ğ¾Ğ²Ñ‹Ğ¹ Ğ²Ñ‹Ğ²Ğ¾Ğ´ |

---

### â³ TODO (TFT Ğ²ĞµÑ€ÑĞ¸Ñ):

| ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚ | Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ | ĞŸÑ€Ğ¸Ğ¼ĞµÑ‡Ğ°Ğ½Ğ¸Ğµ |
|-----------|--------|------------|
| LCD Driver | âŒ | ILI9341 SPI (Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ğ¿Ğ¾Ñ€Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¸Ğ· hydro1.0) |
| LVGL Port | âŒ | ĞĞ´Ğ°Ğ¿Ñ‚Ğ°Ñ†Ğ¸Ñ Ğ´Ğ»Ñ ESP-IDF v5.5 |
| Encoder Driver | âŒ | KY-040 GPIO interrupt |
| UI Screens | âŒ | Dashboard, NodeDetail, Settings |
| GUI Layout | âŒ | ĞšĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ¸ ÑƒĞ·Ğ»Ğ¾Ğ² Ñ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğ¼Ğ¸ |
| Commands | âŒ | ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ° ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´ ÑƒĞ·Ğ»Ğ°Ğ¼ |

---

## ğŸš€ ĞšĞĞš Ğ˜Ğ¡ĞŸĞĞ›Ğ¬Ğ—ĞĞ’ĞĞ¢Ğ¬ Ğ¡Ğ•Ğ™Ğ§ĞĞ¡

### Console Ğ²ĞµÑ€ÑĞ¸Ñ Ğ¿Ğ¾Ğ·Ğ²Ğ¾Ğ»ÑĞµÑ‚:

1. âœ… **ĞœĞ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ñ‚ÑŒ Ğ²ÑĞµ ÑƒĞ·Ğ»Ñ‹** Ñ‡ĞµÑ€ĞµĞ· serial monitor
2. âœ… **Ğ’Ğ¸Ğ´ĞµÑ‚ÑŒ ÑÑ‚Ğ°Ñ‚ÑƒÑ** (online/offline)
3. âœ… **Ğ’Ğ¸Ğ´ĞµÑ‚ÑŒ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ** (temperature, pH, EC, etc.)
4. âœ… **ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑÑ‚ÑŒ ÑĞ²ÑĞ·ÑŒ** (RSSI, heap)
5. âœ… **Ğ¢ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ REQUEST/RESPONSE** Ğ¿Ñ€Ğ¾Ñ‚Ğ¾ĞºĞ¾Ğ»

### ĞĞµ Ğ¿Ğ¾Ğ·Ğ²Ğ¾Ğ»ÑĞµÑ‚ (Ğ¿Ğ¾ĞºĞ°):

- âŒ ĞÑ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ Ğ½Ğ° LCD (Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹ serial monitor)
- âŒ Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ÑĞ½ĞºĞ¾Ğ´ĞµÑ€Ğ¾Ğ¼ (Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ¿Ñ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€)
- âŒ ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ° ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´ (Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾Ğ·Ğ¶Ğµ)

---

## ğŸ”® Ğ¡Ğ›Ğ•Ğ”Ğ£Ğ®Ğ©Ğ˜Ğ• Ğ¨ĞĞ“Ğ˜

### Ğ”Ğ»Ñ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ TFT LCD:

1. **ĞŸĞ¾Ñ€Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ lcd_driver Ğ¸Ğ· hydro1.0:**
   ```bash
   cp -r hydro1.0/components/lcd_ili9341 node_display/components/lcd_driver
   ```

2. **ĞŸĞ¾Ñ€Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ LVGL ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹:**
   ```bash
   cp -r hydro1.0/components/lvgl_ui node_display/components/ui_screens
   ```

3. **ĞĞ´Ğ°Ğ¿Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ´Ğ»Ñ ESP-IDF v5.5:**
   - Ğ˜Ğ·Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ `lv_disp_drv_t` â†’ `lv_display_t`
   - Ğ˜Ğ·Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ `lv_indev_drv_t` â†’ `lv_indev_t`
   - ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ LVGL API calls

4. **Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ² app_main.c:**
   ```c
   // Ğ Ğ°ÑĞºĞ¾Ğ¼Ğ¼ĞµĞ½Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ:
   lcd_driver_init();
   lvgl_port_init();
   encoder_driver_init();
   ui_create_dashboard_screen();
   ```

5. **ĞŸĞµÑ€ĞµÑĞ¾Ğ±Ñ€Ğ°Ñ‚ÑŒ:**
   ```batch
   idf.py build
   idf.py -p COM8 flash monitor
   ```

---

## ğŸ“± Ğ‘Ğ£Ğ”Ğ£Ğ©Ğ˜Ğ™ TFT DASHBOARD (Ğ¿Ğ¾ÑĞ»Ğµ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ LCD)

### Ğ“Ğ»Ğ°Ğ²Ğ½Ñ‹Ğ¹ ÑĞºÑ€Ğ°Ğ½:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸŒ¿ HYDRO MESH v2.0       12:45  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â•­â”€ Climate â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â— ON â”€â•® â”‚
â”‚  â”‚  ğŸŒ¡ 22.8Â°C   ğŸ’§ 60%          â”‚ â”‚
â”‚  â”‚  CO2: 493ppm   Lux: 576      â”‚ â”‚
â”‚  â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯ â”‚
â”‚                                  â”‚
â”‚  â•­â”€ pH/EC â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â— ON â”€â•®â”‚
â”‚  â”‚  pH: 6.5   EC: 2.5 mS/cm    â”‚ â”‚
â”‚  â”‚  Temp: 22.5Â°C                â”‚ â”‚
â”‚  â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯ â”‚
â”‚                                  â”‚
â”‚  â•­â”€ Relay â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â— ON â”€â•®â”‚
â”‚  â”‚  Fan: ON   Light: 75%        â”‚ â”‚
â”‚  â”‚  Window: OPEN                â”‚ â”‚
â”‚  â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯ â”‚
â”‚                                  â”‚
â”‚  Last update: 2s ago   ğŸ“¶ -42dBm â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ÑĞ½ĞºĞ¾Ğ´ĞµÑ€Ğ¾Ğ¼:**
- **Ğ’Ñ€Ğ°Ñ‰ĞµĞ½Ğ¸Ğµ** - Ğ²Ñ‹Ğ±Ğ¾Ñ€ ÑƒĞ·Ğ»Ğ° (Ğ¿Ğ¾Ğ´ÑĞ²ĞµÑ‚ĞºĞ° ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ¸)
- **ĞšĞ»Ğ¸Ğº** - Ğ¿ĞµÑ€ĞµÑ…Ğ¾Ğ´ Ğ² Ğ´ĞµÑ‚Ğ°Ğ»Ğ¸ ÑƒĞ·Ğ»Ğ°
- **Ğ”Ğ¾Ğ»Ğ³Ğ¾Ğµ Ğ½Ğ°Ğ¶Ğ°Ñ‚Ğ¸Ğµ** - Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ Display

---

## ğŸ”§ GPIO Ğ˜Ğ— HYDRO1.0

### ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ (Ğ¸Ğ· system_config.h):

```c
// LCD ILI9341 (SPI)
#define LCD_PIN_MOSI    11                  
#define LCD_PIN_SCLK    12                  
#define LCD_PIN_CS      10                  
#define LCD_PIN_DC      9                   
#define LCD_PIN_RST     14                  
#define LCD_PIN_BCKL    15  // PWM backlight

// Ğ­Ğ½ĞºĞ¾Ğ´ĞµÑ€
#define ENCODER_PIN_CLK 4   // CLK (A)
#define ENCODER_PIN_DT  5   // DT (B)
#define ENCODER_PIN_SW  6   // Button

// ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹
#define LCD_H_RES       240  // Ğ¨Ğ¸Ñ€Ğ¸Ğ½Ğ°
#define LCD_V_RES       320  // Ğ’Ñ‹ÑĞ¾Ñ‚Ğ°
#define LCD_PIXEL_CLK   40000000  // 40 MHz
```

---

## ğŸ’¾ ĞŸĞĞœĞ¯Ğ¢Ğ¬ ESP32-S3

### Ğ¢Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ:

| ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚ | Ğ Ğ°Ğ·Ğ¼ĞµÑ€ | Ğ Ğ°ÑĞ¿Ğ¾Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ |
|-----------|--------|--------------|
| LVGL heap | 256 KB | PSRAM |
| Draw buffers (2x) | 50 KB | PSRAM |
| Cache nodes (10) | 10 KB | RAM |
| FreeRTOS tasks | 30 KB | RAM |
| **Ğ˜Ğ¢ĞĞ“Ğ** | ~350 KB | PSRAM+RAM |

**ESP32-S3 Ñ 8MB PSRAM Ğ»ĞµĞ³ĞºĞ¾ ÑĞ¿Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑÑ!**

---

## ğŸ”„ Ğ§ĞĞ¡Ğ¢ĞĞ¢Ğ« ĞĞ‘ĞĞĞ’Ğ›Ğ•ĞĞ˜Ğ¯

### Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ¸:

| Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ° | Ğ˜Ğ½Ñ‚ĞµÑ€Ğ²Ğ°Ğ» | ĞŸÑ€Ğ¸Ğ¾Ñ€Ğ¸Ñ‚ĞµÑ‚ |
|--------|----------|-----------|
| request_task | 5 ÑĞµĞº | 5 (ÑÑ€ĞµĞ´Ğ½Ğ¸Ğ¹) |
| heartbeat_task | 10 ÑĞµĞº | 4 (Ğ½Ğ¸Ğ·ĞºĞ¸Ğ¹) |
| display_task | 10 ÑĞµĞº | 6 (Ğ²Ñ‹ÑĞ¾ĞºĞ¸Ğ¹) |
| lvgl_timer (TODO) | 5 Ğ¼Ñ | 6 (Ğ²Ñ‹ÑĞ¾ĞºĞ¸Ğ¹) |

---

## ğŸ¯ Ğ§Ğ¢Ğ Ğ£Ğ–Ğ• Ğ ĞĞ‘ĞĞ¢ĞĞ•Ğ¢ Ğ¡Ğ•Ğ™Ğ§ĞĞ¡

### âœ… Ğ‘Ğ°Ğ·Ğ¾Ğ²Ğ°Ñ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ:

1. **Mesh Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ:**
   ```
   I (5000) mesh_manager: âœ“ MESH Parent connected!
   I (5005) mesh_manager: Layer: 2
   ```

2. **REQUEST Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ°:**
   ```
   I (15000) DISPLAY: ğŸ” Data request sent to ROOT
   ```

3. **RESPONSE Ğ¿Ğ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ:**
   ```
   I (15200) DISPLAY: ğŸ“¥ RESPONSE from ROOT received!
   I (15210) DISPLAY:    Response contains 3 nodes
   ```

4. **ĞšÑÑˆĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ:**
   ```
   I (15220) DISPLAY:    Cache updated (3 nodes)
   I (15230) DISPLAY:    [0] climate_001 (climate) - ONLINE
   I (15240) DISPLAY:    [1] ph_ec_001 (ph_ec) - ONLINE
   I (15250) DISPLAY:    [2] root_98a316f5fde8 (root) - ONLINE
   ```

5. **Console Dashboard:**
   ```
   I (25000) DISPLAY: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
   I (25000) DISPLAY: â•‘  ğŸŸ¢ climate_001 (climate)         â•‘
   I (25000) DISPLAY: â•‘     Data: {"temperature":22.8}   â•‘
   ```

6. **Heartbeat:**
   ```
   I (20000) DISPLAY: ğŸ’“ Heartbeat sent (uptime=15s, heap=3500000B, RSSI=-42)
   ```

---

## ğŸ“Š BACKEND Ğ˜ĞĞ¢Ğ•Ğ“Ğ ĞĞ¦Ğ˜Ğ¯

### Display Ğ¿Ğ¾ÑĞ²Ğ¸Ñ‚ÑÑ Ğ½Ğ° Dashboard:

ĞŸĞ¾ÑĞ»Ğµ Ğ¿Ñ€Ğ¾ÑˆĞ¸Ğ²ĞºĞ¸ Ğ¸ Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ñ Display NODE:

**http://localhost:3000**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ display_001         ğŸŸ¢ Online   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ’¾ RAM         15%              â”‚
â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘                â”‚
â”‚                                 â”‚
â”‚ ğŸ“¶ WiFi        -42 dBm          â”‚
â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ• Last seen: < 1 sec           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ‰ Ğ˜Ğ¢ĞĞ“

### âœ… Ğ¡Ğ•Ğ™Ğ§ĞĞ¡:

**NODE Display Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡Ğ°ĞµÑ‚ÑÑ Ğº mesh, Ğ·Ğ°Ğ¿Ñ€Ğ°ÑˆĞ¸Ğ²Ğ°ĞµÑ‚ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ²ÑĞµÑ… ÑƒĞ·Ğ»Ğ¾Ğ² Ğ¸ Ğ¿Ğ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ Ğ¸Ñ… Ğ² console!**

Ğ­Ñ‚Ğ¾ **Ğ¿Ğ¾Ğ»Ğ½Ğ¾Ñ†ĞµĞ½Ğ½Ñ‹Ğ¹ Ğ¼Ğ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³** Ğ±ĞµĞ· Ğ½ĞµĞ¾Ğ±Ñ…Ğ¾Ğ´Ğ¸Ğ¼Ğ¾ÑÑ‚Ğ¸ ĞºĞ¾Ğ¼Ğ¿ÑŒÑÑ‚ĞµÑ€Ğ°/ÑĞ¼Ğ°Ñ€Ñ‚Ñ„Ğ¾Ğ½Ğ°!

### ğŸ”® ĞŸĞ›ĞĞĞ«:

ĞŸĞ¾ÑĞ»Ğµ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ LCD Ğ´Ñ€Ğ°Ğ¹Ğ²ĞµÑ€Ğ° Ğ¸ LVGL:
- ğŸ“º TFT Ğ´Ğ¸ÑĞ¿Ğ»ĞµĞ¹ Ñ ĞºÑ€Ğ°ÑĞ¸Ğ²Ñ‹Ğ¼ GUI
- ğŸ® Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ÑĞ½ĞºĞ¾Ğ´ĞµÑ€Ğ¾Ğ¼
- ğŸ“Š Ğ“Ñ€Ğ°Ñ„Ğ¸ĞºĞ¸ Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ğ¾Ğ²
- âš™ï¸ ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ ÑƒĞ·Ğ»Ğ¾Ğ²
- ğŸš€ ĞšĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹ ÑƒĞ·Ğ»Ğ°Ğ¼

---

**Ğ‘ĞĞ—ĞĞ’ĞĞ¯ Ğ’Ğ•Ğ Ğ¡Ğ˜Ğ¯ Ğ“ĞĞ¢ĞĞ’Ğ! Ğ¡ĞĞ‘Ğ˜Ğ ĞĞ•Ğ¢Ğ¡Ğ¯ Ğ¡Ğ•Ğ™Ğ§ĞĞ¡...** ğŸ“ºâœ…

