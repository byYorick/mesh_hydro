# ü§ñ AI INSTRUCTIONS - NODE Water

## üéØ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ —É–∑–ª–∞

**NODE Water (ESP32-C3)** - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–æ–¥–æ–π (–Ω–∞—Å–æ—Å—ã + –∫–ª–∞–ø–∞–Ω—ã)

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:
- üíß –ù–∞—Å–æ—Å –ø–æ–¥–∞—á–∏ –≤–æ–¥—ã (—Ä–µ–ª–µ)
- üíß –ù–∞—Å–æ—Å —Å–ª–∏–≤–∞ –≤–æ–¥—ã (—Ä–µ–ª–µ)
- üö∞ 3 —Å–æ–ª–µ–Ω–æ–∏–¥–Ω—ã—Ö –∫–ª–∞–ø–∞–Ω–∞ (–∑–æ–Ω—ã –ø–æ–ª–∏–≤–∞)
- üìè –î–∞—Ç—á–∏–∫ —É—Ä–æ–≤–Ω—è –≤–æ–¥—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- üì• –ö–æ–º–∞–Ω–¥—ã –æ—Ç ROOT –∏–ª–∏ –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é

### –ö—Ä–∏—Ç–∏—á–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞:
- ‚úÖ Safety: –º–∞–∫—Å –≤—Ä–µ–º—è –Ω–∞—Å–æ—Å–∞ (60 —Å–µ–∫)
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Ä–æ–≤–Ω—è –≤–æ–¥—ã –ø–µ—Ä–µ–¥ –ø–æ–¥–∞—á–µ–π
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

---

## üîå –†–∞—Å–ø–∏–Ω–æ–≤–∫–∞

| GPIO | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|------|------------|
| 1 | –ù–∞—Å–æ—Å –ø–æ–¥–∞—á–∏ |
| 2 | –ù–∞—Å–æ—Å —Å–ª–∏–≤–∞ |
| 3 | –ö–ª–∞–ø–∞–Ω –∑–æ–Ω–∞ 1 |
| 4 | –ö–ª–∞–ø–∞–Ω –∑–æ–Ω–∞ 2 |
| 5 | –ö–ª–∞–ø–∞–Ω –∑–æ–Ω–∞ 3 |
| 6 | –î–∞—Ç—á–∏–∫ —É—Ä–æ–≤–Ω—è (–æ–ø—Ü.) |

---

## üíª –ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞

```c
void water_zone_activate(int zone_num, uint32_t duration_ms) {
    // 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Ä–æ–≤–Ω—è –≤–æ–¥—ã
    if (!check_water_level()) {
        ESP_LOGE(TAG, "Low water level!");
        return;
    }
    
    // 2. –û—Ç–∫—Ä—ã—Ç—å –∫–ª–∞–ø–∞–Ω –∑–æ–Ω—ã
    gpio_set_level(valve_gpio[zone_num], 1);
    
    // 3. –í–∫–ª—é—á–∏—Ç—å –Ω–∞—Å–æ—Å –ø–æ–¥–∞—á–∏
    gpio_set_level(GPIO_PUMP_IN, 1);
    
    // 4. –¢–∞–π–º–µ—Ä
    vTaskDelay(pdMS_TO_TICKS(duration_ms));
    
    // 5. –í—ã–∫–ª—é—á–∏—Ç—å
    gpio_set_level(GPIO_PUMP_IN, 0);
    gpio_set_level(valve_gpio[zone_num], 0);
    
    // 6. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
    log_water_usage(zone_num, duration_ms);
}
```

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–°–º. `node_water/README.md` –∏ `doc/MESH_HYDRO_V2_FINAL_PLAN.md`

**–§–∞–∑–∞ 8 —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ (2-3 –¥–Ω—è)**

