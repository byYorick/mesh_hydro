# ‚úÖ –ù–ê–°–¢–†–û–ô–ö–ê –ó–ê–í–ï–†–®–ï–ù–ê

## üéâ –°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ!

**–î–∞—Ç–∞:** 22 –æ–∫—Ç—è–±—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ Production Ready

---

## üìä –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### 1. API Backend
```bash
GET http://localhost:8000/api/nodes
```
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** `[]` ‚úÖ (–ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤ - –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ)

### 2. Frontend
```bash
GET http://localhost:3000
```
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –î–æ—Å—Ç—É–ø–µ–Ω

### 3. MQTT Broker
```bash
mqtt://localhost:1883
```
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –ü—Ä–æ—Å–ª—É—à–∏–≤–∞–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

### 4. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
| –¢–∞–±–ª–∏—Ü–∞ | –ó–∞–ø–∏—Å–µ–π |
|---------|---------|
| Nodes | 0 |
| Telemetry | 0 |
| Events | 0 |
| Commands | 0 |
| PID Presets | 6 ‚úÖ |

---

## üîß –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### ‚úÖ 1. –û—á–∏—â–µ–Ω–∞ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- –£–¥–∞–ª–µ–Ω–æ 7 —Ç–µ—Å—Ç–æ–≤—ã—Ö —É–∑–ª–æ–≤
- –£–¥–∞–ª–µ–Ω–æ 864 –∑–∞–ø–∏—Å–∏ —Ç–µ–ª–µ–º–µ—Ç—Ä–∏–∏
- –£–¥–∞–ª–µ–Ω–æ 10 —Ç–µ—Å—Ç–æ–≤—ã—Ö —Å–æ–±—ã—Ç–∏–π
- –°–æ—Ö—Ä–∞–Ω–µ–Ω—ã 6 PID –ø—Ä–µ—Å–µ—Ç–æ–≤

### ‚úÖ 2. –û—Ç–∫–ª—é—á–µ–Ω—ã —Ç–µ—Å—Ç–æ–≤—ã–µ —Å–∏–¥—ã
- `NodeSeeder` - –æ—Ç–∫–ª—é—á–µ–Ω
- `TelemetrySeeder` - –æ—Ç–∫–ª—é—á–µ–Ω  
- `EventSeeder` - –æ—Ç–∫–ª—é—á–µ–Ω
- `PidPresetSeeder` - ‚úÖ –∞–∫—Ç–∏–≤–µ–Ω

### ‚úÖ 3. –ù–∞—Å—Ç—Ä–æ–µ–Ω Production —Ä–µ–∂–∏–º
```yaml
APP_ENV=production
APP_DEBUG=false
LOG_LEVEL=info
```

### ‚úÖ 4. –°–∏—Å—Ç–µ–º–∞ –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω–∞
–í—Å–µ 7 –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ:
- ‚úÖ hydro_postgres (healthy)
- ‚úÖ hydro_mosquitto
- ‚úÖ hydro_backend
- ‚úÖ hydro_frontend
- ‚úÖ hydro_reverb
- ‚úÖ hydro_mqtt_listener (–∞–≤—Ç–æ-—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∞–∫—Ç–∏–≤–Ω–∞)
- ‚úÖ hydro_scheduler

---

## üöÄ –ö–∞–∫ –Ω–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É

### –®–∞–≥ 1: –ü—Ä–æ—à–∏—Ç—å ESP32 —É–∑–ª—ã
```bash
cd node_ph
idf.py flash monitor
```

### –®–∞–≥ 2: –£–∑–ª—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É—é—Ç—Å—è
–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ —É–∑–µ–ª:
1. –ü–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ MQTT (mosquitto:1883)
2. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç discovery —Å–æ–æ–±—â–µ–Ω–∏–µ
3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤ —Å–∏—Å—Ç–µ–º–µ
4. –ù–∞—á–∏–Ω–∞–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Ç–µ–ª–µ–º–µ—Ç—Ä–∏—é

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ
```
http://localhost:3000
```

---

## üì° MQTT —Ç–æ–ø–∏–∫–∏

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç:

| –¢–æ–ø–∏–∫ | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|-------|-----------|
| `hydro/discovery` | –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤—ã—Ö —É–∑–ª–æ–≤ |
| `hydro/telemetry/#` | –î–∞–Ω–Ω—ã–µ —Å –¥–∞—Ç—á–∏–∫–æ–≤ |
| `hydro/heartbeat/#` | –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–≤—è–∑–∏ |
| `hydro/event/#` | –°–æ–±—ã—Ç–∏—è –∏ –∞–ª–µ—Ä—Ç—ã |
| `hydro/response/#` | –û—Ç–≤–µ—Ç—ã –Ω–∞ –∫–æ–º–∞–Ω–¥—ã |
| `hydro/error/#` | –û—à–∏–±–∫–∏ —É–∑–ª–æ–≤ |

---

## üîó –î–æ—Å—Ç—É–ø –∫ —Å–µ—Ä–≤–∏—Å–∞–º

| –°–µ—Ä–≤–∏—Å | URL | –°—Ç–∞—Ç—É—Å |
|--------|-----|--------|
| Frontend | http://localhost:3000 | ‚úÖ |
| Backend API | http://localhost:8000 | ‚úÖ |
| WebSocket | ws://localhost:8080 | ‚úÖ |
| MQTT Broker | mqtt://localhost:1883 | ‚úÖ |
| PostgreSQL | localhost:5432 | ‚úÖ |

---

## üìù –ö–æ–º–∞–Ω–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
```bash
docker ps --filter "name=hydro_"
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
```bash
docker logs hydro_mqtt_listener -f
docker logs hydro_backend -f
```

### –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã
```bash
cd server
docker-compose restart
```

### –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–∏—Å—Ç–µ–º—ã
```bash
cd server
docker-compose down
```

### –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã
```bash
cd server
docker-compose up -d
```

---

## üõ†Ô∏è –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### –û—á–∏—Å—Ç–∫–∞ –ë–î (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
```bash
docker exec hydro_backend php artisan db:clean-test-data --force
```

### –ú–∏–≥—Ä–∞—Ü–∏–∏
```bash
docker exec hydro_backend php artisan migrate:status
```

### –û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞
```bash
docker exec hydro_backend php artisan cache:clear
docker exec hydro_backend php artisan config:clear
```

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **–ü–æ–ª–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞:** `server/PRODUCTION_SETUP.md`
- **–ñ—É—Ä–Ω–∞–ª –∏–∑–º–µ–Ω–µ–Ω–∏–π:** `PRODUCTION_CHANGES_LOG.md`
- **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞:** `ARCHITECTURE.md`
- **–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç:** `START_HERE.md`

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ø—É—Å—Ç–∞—è** - —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –¥–ª—è production
2. **–£–∑–ª—ã –¥–æ–±–∞–≤—è—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ —á–µ—Ä–µ–∑ MQTT
3. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤–∫–ª—é—á–µ–Ω–∞** –≤ MQTT Listener
4. **PID –ø—Ä–µ—Å–µ—Ç—ã –≥–æ—Ç–æ–≤—ã** –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é (6 –Ω–∞—Å—Ç—Ä–æ–µ–∫)
5. **Debug —Ä–µ–∂–∏–º –æ—Ç–∫–ª—é—á–µ–Ω** –¥–ª—è production

---

## üéØ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

–°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ ESP32 —É–∑–ª–∞–º–∏.

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –ü—Ä–æ—à–∏—Ç—å –∏ –ø–æ–¥–∫–ª—é—á–∏—Ç—å ESP32 —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞.

---

**–£–¥–∞—á–Ω–æ–π —Ä–∞–±–æ—Ç—ã! üöÄ**

