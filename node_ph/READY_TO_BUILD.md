# NODE pH - –ì–û–¢–û–í –ö –°–ë–û–†–ö–ï –ò –ü–†–û–®–ò–í–ö–ï

**–î–∞—Ç–∞:** 21.10.2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

---

## ‚úÖ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (8 —à—Ç):
- ‚úÖ ph_sensor - –î—Ä–∞–π–≤–µ—Ä Trema pH (I2C 0x4D)
- ‚úÖ pump_controller - 2 –Ω–∞—Å–æ—Å–∞ (GPIO 2, 3)
- ‚úÖ pid_controller - PID –∞–ª–≥–æ—Ä–∏—Ç–º
- ‚úÖ ph_manager - –ì–ª–∞–≤–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä
- ‚úÖ oled_display - OLED SSD1306
- ‚úÖ connection_monitor - –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–≤—è–∑–∏
- ‚úÖ local_storage - –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
- ‚úÖ buzzer_led - –ò–Ω–¥–∏–∫–∞—Ü–∏—è

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:
- ‚úÖ CMakeLists.txt –¥–ª—è ESP32-C3
- ‚úÖ sdkconfig.defaults
- ‚úÖ partitions.csv
- ‚úÖ app_main.c —Å –ø–æ–ª–Ω–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–µ–π

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:
- ‚úÖ README.md
- ‚úÖ AI_INSTRUCTIONS.md

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ WiFi

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π `sdkconfig.defaults`:
```
CONFIG_ESP_WIFI_SSID="your_wifi_ssid"
CONFIG_ESP_WIFI_PASSWORD="your_wifi_password"
```

### 2. –°–±–æ—Ä–∫–∞

```bash
cd node_ph
idf.py set-target esp32c3
idf.py build
```

### 3. –ü—Ä–æ—à–∏–≤–∫–∞

```bash
idf.py -p COMX flash monitor
```

–ó–∞–º–µ–Ω–∏ `COMX` –Ω–∞ —Å–≤–æ–π –ø–æ—Ä—Ç (COM3, COM4, –∏ —Ç.–¥.)

---

## üîå –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

### –î–∞—Ç—á–∏–∫ pH (Trema):
- VCC ‚Üí 3.3V
- GND ‚Üí GND
- SDA ‚Üí GPIO 8
- SCL ‚Üí GPIO 9

### OLED SSD1306:
- VCC ‚Üí 3.3V
- GND ‚Üí GND
- SDA ‚Üí GPIO 8
- SCL ‚Üí GPIO 9

### –ù–∞—Å–æ—Å—ã:
- Pump pH UP ‚Üí GPIO 2
- Pump pH DOWN ‚Üí GPIO 3
- VCC ‚Üí 5V (—á–µ—Ä–µ–∑ —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä—ã/MOSFET)

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ë–µ–∑ –¥–∞—Ç—á–∏–∫–∞ (Mock —Ä–µ–∂–∏–º):
–ù–æ–¥–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–π–¥–µ—Ç –≤ mock —Ä–µ–∂–∏–º –µ—Å–ª–∏ –¥–∞—Ç—á–∏–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω:
- pH = 7.0 (–¥–µ—Ñ–æ–ª—Ç–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ)
- –õ–æ–≥–∏: "pH sensor not found - using mock values"

### –° –¥–∞—Ç—á–∏–∫–æ–º:
- –ù–æ–¥–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–∞—Ä—É–∂–∏—Ç –¥–∞—Ç—á–∏–∫
- –ù–∞—á–Ω–µ—Ç —á–∏—Ç–∞—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è pH
- PID –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –Ω–∞—á–Ω–µ—Ç —Ä–∞–±–æ—Ç—É

---

## üìä –î–µ—Ñ–æ–ª—Ç–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

```
pH target: 6.5
pH range: 5.5 - 7.5

PID –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (–∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã–µ):
  pH UP:   Kp=1.0, Ki=0.05, Kd=0.3
  pH DOWN: Kp=1.0, Ki=0.05, Kd=0.3
```

–í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ NVS.

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- ‚úÖ –ê–≤—Ç–æ–Ω–æ–º–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –ø—Ä–∏ offline
- ‚úÖ Emergency stop –ø—Ä–∏ pH < 5.5 –∏–ª–∏ > 7.5
- ‚úÖ –ú–∞–∫—Å –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã –Ω–∞—Å–æ—Å–∞: 10 —Å–µ–∫
- ‚úÖ Cooldown –º–µ–∂–¥—É –≤–∫–ª—é—á–µ–Ω–∏—è–º–∏: 30 —Å–µ–∫

---

**–ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!** üéâ

