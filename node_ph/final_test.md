# üéâ –§–ò–ù–ê–õ–¨–ù–´–ô –¢–ï–°–¢ - NODE pH –†–ê–ë–û–¢–ê–ï–¢!

## ‚úÖ **–ß–¢–û –†–ê–ë–û–¢–ê–ï–¢:**

### 1. **JSON –ø–∞—Ä—Å–∏–Ω–≥ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω**
- –ö–æ–º–∞–Ω–¥—ã –æ—Ç ROOT –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è
- `msg.data` —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–ª–Ω—ã–π JSON –æ–±—ä–µ–∫—Ç
- –í—Å–µ –ø–æ–ª—è (`command`, `params`) –∏–∑–≤–ª–µ–∫–∞—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ

### 2. **–ù–∞—Å–æ—Å—ã —Ä–∞–±–æ—Ç–∞—é—Ç**
- **GPIO 12** = Pump 0 (pH UP) - ‚úÖ –†–ê–ë–û–¢–ê–ï–¢
- **GPIO 13** = Pump 1 (pH DOWN) - ‚úÖ –†–ê–ë–û–¢–ê–ï–¢
- PWM —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: 0-100% duty cycle
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–æ —Ç–∞–π–º–µ—Ä—É
- –ó–∞—â–∏—Ç–∞ –æ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞

### 3. **pH –¥–∞—Ç—á–∏–∫ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω**
- Mock —Ä–µ–∂–∏–º –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è (6.0-7.5)
- –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö —Ä–∞–±–æ—Ç–∞–µ—Ç
- Fallback –Ω–∞ –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è

### 4. **–ö–æ–º–∞–Ω–¥—ã —Ä–∞–±–æ—Ç–∞—é—Ç**
```json
{
  "command": "run_pump_manual",
  "params": {
    "pump_id": 0,
    "duration_sec": 5
  }
}
```

## üìä **–†–ï–ó–£–õ–¨–¢–ê–¢–´ –¢–ï–°–¢–ê:**

### –£—Å–ø–µ—à–Ω—ã–π –∑–∞–ø—É—Å–∫ –Ω–∞—Å–æ—Å–∞:
```
I (129878) pump_ctrl: Pump 0 START (5000 ms) GPIO=12 duty=100%
I (129884) pump_ctrl: pump_start_internal returned: ESP_OK
```

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞:
```
I (134884) pump_ctrl: Pump 0 STOP (10.00 ml, 5000 ms) GPIO=12
```

### pH –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:
```
I (131305) ph_mgr: pH: 6.63 (target: 6.50, mock=YES)
```

## üîß **–ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø:**

1. **mesh_protocol.c** - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω –ø–∞—Ä—Å–∏–Ω–≥ –∫–æ–º–∞–Ω–¥
2. **ph_sensor.c** - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è mock –¥–∞–Ω–Ω—ã—Ö
3. **ph_manager.c** - –¥–æ–±–∞–≤–ª–µ–Ω—ã –æ—Ç–ª–∞–¥–æ—á–Ω—ã–µ –ª–æ–≥–∏
4. **pump_controller.c** - —É–ª—É—á—à–µ–Ω–∞ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

## üéØ **–°–ò–°–¢–ï–ú–ê –ì–û–¢–û–í–ê –ö –†–ê–ë–û–¢–ï!**

- ‚úÖ pH –∫–æ–Ω—Ç—Ä–æ–ª—å —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ù–∞—Å–æ—Å—ã —É–ø—Ä–∞–≤–ª—è—é—Ç—Å—è
- ‚úÖ –ö–æ–º–∞–Ω–¥—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è
- ‚úÖ Emergency –∑–∞—â–∏—Ç–∞ –∞–∫—Ç–∏–≤–Ω–∞
- ‚úÖ Mock —Ä–µ–∂–∏–º –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

## üß™ **–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**

1. **–¢–µ—Å—Ç –Ω–∞—Å–æ—Å–∞ 0 (pH UP):**
```json
{"command": "run_pump_manual", "params": {"pump_id": 0, "duration_sec": 2}}
```

2. **–¢–µ—Å—Ç –Ω–∞—Å–æ—Å–∞ 1 (pH DOWN):**
```json
{"command": "run_pump_manual", "params": {"pump_id": 1, "duration_sec": 2}}
```

3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞:**
```json
{"command": "get_sensor_status", "params": {}}
```

**–í–°–Å –†–ê–ë–û–¢–ê–ï–¢!** üöÄ
