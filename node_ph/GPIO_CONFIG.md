# üìå GPIO –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è node_ph (ESP32)

**–î–∞—Ç–∞:** 22 –æ–∫—Ç—è–±—Ä—è 2025  
**–ü–ª–∞—Ç–∞:** ESP32 (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π DevKit)  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ù–ê–°–¢–†–û–ï–ù–û –ò –ü–†–û–í–ï–†–ï–ù–û

---

## üîå –†–∞—Å–ø–∏–Ω–æ–≤–∫–∞

### –ù–∞—Å–æ—Å—ã (PWM):
| GPIO | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ |
|------|------------|------------|
| **12** | Pump 0 (pH UP) | PWM 0-100% |
| **13** | Pump 1 (pH DOWN) | PWM 0-100% |

**–†–µ–∂–∏–º:** GPIO HIGH = –Ω–∞—Å–æ—Å –≤–∫–ª—é—á–µ–Ω, GPIO LOW = –≤—ã–∫–ª—é—á–µ–Ω

### I2C (–¥–∞—Ç—á–∏–∫–∏):
| GPIO | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|------|------------|
| **22** | SCL (I2C Clock) |
| **21** | SDA (I2C Data) |

**–£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –Ω–∞ I2C:**
- Trema pH (0x0A) - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
- OLED Display (0x3C) - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ

---

## ‚ö° –°—Ö–µ–º–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –Ω–∞—Å–æ—Å–æ–≤

```
ESP32 GPIO 12 ‚Üí MOSFET/–†–µ–ª–µ ‚Üí Pump pH UP (12V)
                    ‚Üì
             –ü–∏—Ç–∞–Ω–∏–µ 12V (–æ—Ç–¥–µ–ª—å–Ω–æ–µ!)

ESP32 GPIO 13 ‚Üí MOSFET/–†–µ–ª–µ ‚Üí Pump pH DOWN (12V)
                    ‚Üì
             –ü–∏—Ç–∞–Ω–∏–µ 12V (–æ—Ç–¥–µ–ª—å–Ω–æ–µ!)
```

**–í–ê–ñ–ù–û:** 
- ESP32 GPIO –≤—ã–¥–∞—ë—Ç 3.3V
- –î–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –Ω–∞—Å–æ—Å–∞–º–∏ 12V –Ω—É–∂–µ–Ω MOSFET (IRLZ44N) –∏–ª–∏ —Ä–µ–ª–µ
- –ü–∏—Ç–∞–Ω–∏–µ –Ω–∞—Å–æ—Å–æ–≤ –û–¢–î–ï–õ–¨–ù–û–ï –æ—Ç ESP32!

---

## üß™ –¢–µ—Å—Ç GPIO

### –¢–µ—Å—Ç LED (–±—ã—Å—Ç—Ä—ã–π):
```
GPIO 12 ‚Üí LED (+ —Ä–µ–∑–∏—Å—Ç–æ—Ä 220Œ©) ‚Üí GND
GPIO 13 ‚Üí LED (+ —Ä–µ–∑–∏—Å—Ç–æ—Ä 220Œ©) ‚Üí GND
```

### –ö–æ–º–∞–Ω–¥—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:
```bash
# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–∞ –Ω–∞—Å–æ—Å–æ–≤:
test_pumps.bat

# –ö–æ–º–∞–Ω–¥—ã —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å:
# Pump 0 (GPIO 12) - 2 —Å–µ–∫—É–Ω–¥—ã:
{"command": "run_pump_manual", "params": {"pump_id": 0, "duration_sec": 2}}

# Pump 1 (GPIO 13) - 2 —Å–µ–∫—É–Ω–¥—ã:
{"command": "run_pump_manual", "params": {"pump_id": 1, "duration_sec": 2}}

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞:
{"command": "get_sensor_status", "params": {}}
```

### –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
- LED –Ω–∞ GPIO 12 –∑–∞–≥–æ—Ä–∏—Ç—Å—è –ø—Ä–∏ —Ç–µ—Å—Ç–µ Pump 0
- LED –Ω–∞ GPIO 13 –∑–∞–≥–æ—Ä–∏—Ç—Å—è –ø—Ä–∏ —Ç–µ—Å—Ç–µ Pump 1
- –í –ª–æ–≥–∞—Ö: "Pump X: dose X.XX ml = XXX ms"

---

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- **GPIO 6-11:** –ù–ï –ò–°–ü–û–õ–¨–ó–û–í–ê–¢–¨! –ó–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω—ã –¥–ª—è SPI Flash –ø–∞–º—è—Ç–∏
- **GPIO 21, 22:** –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –ø–∏–Ω—ã I2C –¥–ª—è ESP32
- GPIO 12 –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è Flash
- –ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–∞—é—Ç –ø—Ä–æ–±–ª–µ–º—ã —Å –∑–∞–≥—Ä—É–∑–∫–æ–π, –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ –Ω–∞—Å–æ—Å—ã –Ω–∞ GPIO 25,26
- GPIO 34-39 —Ç–æ–ª—å–∫–æ INPUT, –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–ª—è –Ω–∞—Å–æ—Å–æ–≤!

---

**–ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!** ‚úÖ

