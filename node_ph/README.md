# NODE pH - Autonomous pH Control Node

**ESP32-C3** - –ê–≤—Ç–æ–Ω–æ–º–Ω—ã–π —É–∑–µ–ª —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è pH

---

## üéØ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

–£–∑–µ–ª —Å–∏—Å—Ç–µ–º—ã Mesh Hydro –¥–ª—è:
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ pH –≤ –ø–∏—Ç–∞—Ç–µ–ª—å–Ω–æ–º —Ä–∞—Å—Ç–≤–æ—Ä–µ
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∫–æ—Ä—Ä–µ–∫—Ü–∏–∏ —á–µ—Ä–µ–∑ 2 –ø–µ—Ä–∏—Å—Ç–∞–ª—å—Ç–∏—á–µ—Å–∫–∏—Ö –Ω–∞—Å–æ—Å–∞ (UP/DOWN)
- PID —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–ª—è —Ç–æ—á–Ω–æ–≥–æ –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- –ê–≤—Ç–æ–Ω–æ–º–Ω–æ–π —Ä–∞–±–æ—Ç—ã –ø—Ä–∏ –ø–æ—Ç–µ—Ä–µ —Å–≤—è–∑–∏ —Å ROOT
- Emergency protection –ø—Ä–∏ –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏—è—Ö

---

## üîå –†–∞—Å–ø–∏–Ω–æ–≤–∫–∞ ESP32-C3

| GPIO | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ |
|------|------------|------------|
| **I2C —à–∏–Ω–∞:** | | |
| 8 | I2C SDA | Data (pH –¥–∞—Ç—á–∏–∫ + OLED) |
| 9 | I2C SCL | Clock (100 kHz) |
| **–ù–∞—Å–æ—Å—ã:** | | |
| 2 | Pump pH UP | GPIO HIGH = –≤–∫–ª |
| 3 | Pump pH DOWN | GPIO HIGH = –≤–∫–ª |
| **–ò–Ω–¥–∏–∫–∞—Ü–∏—è:** | | |
| 4 | LED Status | RGB –∏–ª–∏ –æ–±—ã—á–Ω—ã–π LED |
| 5 | Buzzer | 3.3V –∞–∫—Ç–∏–≤–Ω—ã–π |

---

## üì¶ I2C –£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞

| –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ | –ê–¥—Ä–µ—Å | –û–ø–∏—Å–∞–Ω–∏–µ |
|------------|-------|----------|
| **Trema pH** | 0x4D | –î–∞—Ç—á–∏–∫ pH (0-14) |
| **OLED SSD1306** | 0x3C | –î–∏—Å–ø–ª–µ–π 128x64 |

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. WiFi –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π `sdkconfig.defaults`:
```
CONFIG_ESP_WIFI_SSID="YourWiFi"
CONFIG_ESP_WIFI_PASSWORD="YourPassword"
```

### 2. –°–±–æ—Ä–∫–∞

```bash
cd node_ph
idf.py set-target esp32c3
idf.py build
```

### 3. –ü—Ä–æ—à–∏–≤–∫–∞

```bash
idf.py -p COMX flash monitor
```

---

## üìä –î–µ—Ñ–æ–ª—Ç–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

```c
pH target: 6.5 (–¥–∏–∞–ø–∞–∑–æ–Ω 5.5-7.5)

PID –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã (–∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã–µ):
  pH UP:   Kp=1.0, Ki=0.05, Kd=0.3
  pH DOWN: Kp=1.0, Ki=0.05, Kd=0.3
```

---

## üì° Mesh –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è

### Discovery:
```json
{
  "type": "discovery",
  "node_id": "ph_xxx",
  "node_type": "ph",
  "actuators": ["pump_ph_up", "pump_ph_down"],
  "sensors": ["ph"]
}
```

### Telemetry:
```json
{
  "type": "telemetry",
  "data": {
    "ph": 6.8,
    "pump_ph_up_ml": 150.5,
    "pump_ph_down_ml": 75.2
  }
}
```

---

**NODE pH - –∞–≤—Ç–æ–Ω–æ–º–Ω—ã–π —É–∑–µ–ª —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è pH** üõ°Ô∏è

