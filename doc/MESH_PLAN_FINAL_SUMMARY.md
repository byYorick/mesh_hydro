# üéâ –ò–¢–û–ì–û–í–ê–Ø –°–í–û–î–ö–ê - MESH HYDRO V2 PLAN

**–î–∞—Ç–∞:** 17 –æ–∫—Ç—è–±—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–ª–∞–Ω –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤!  
**–í—Ä–µ–º—è –Ω–∞ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ:** ~2 —á–∞—Å–∞

---

## üìã –ß–¢–û –°–î–ï–õ–ê–ù–û

### –°–æ–∑–¥–∞–Ω–æ 7 –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –ø–ª–∞–Ω–∞:

| # | –§–∞–π–ª | –°—Ç—Ä–æ–∫ | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|---|------|-------|------------|
| 1 | **MESH_HYDRO_V2_FINAL_PLAN.md** ‚≠ê | ~850 | –ü–æ–ª–Ω—ã–π –¥–µ—Ç–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω —Å –∫–æ–¥–æ–º |
| 2 | **MESH_ARCHITECTURE_PLAN.md** | ~450 | –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã |
| 3 | **MESH_PINOUT_ALL_NODES.md** | ~280 | GPIO –≤—Å–µ—Ö —É–∑–ª–æ–≤ |
| 4 | **MESH_IMPLEMENTATION_PRIORITY.md** | ~320 | –ü–æ—Ä—è–¥–æ–∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ |
| 5 | **MESH_AI_QUICK_START.md** | ~280 | –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –¥–ª—è AI |
| 6 | **MESH_PROJECT_INDEX.md** | ~250 | –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º |
| 7 | **MESH_QUICK_SUMMARY.md** | ~180 | –ö—Ä–∞—Ç–∫–∞—è —Å–≤–æ–¥–∫–∞ (1 —Å—Ç—Ä–∞–Ω–∏—Ü–∞) |

**–ò–¢–û–ì–û:** ~2600 —Å—Ç—Ä–æ–∫ –¥–µ—Ç–∞–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏!

---

## üèóÔ∏è –ê–†–•–ò–¢–ï–ö–¢–£–†–ê (–§–ò–ù–ê–õ–¨–ù–ê–Ø)

```
–°–ï–†–í–ï–† (–ü–ö)
‚îú‚îÄ‚îÄ Laravel 10 + Vue.js 3
‚îú‚îÄ‚îÄ PostgreSQL 15 (–≤—Å—è –∏—Å—Ç–æ—Ä–∏—è!)
‚îú‚îÄ‚îÄ Mosquitto MQTT
‚îú‚îÄ‚îÄ Telegram Bot (—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è + —Å—Ç–∞—Ç—É—Å)
‚îú‚îÄ‚îÄ SMS Gateway (–∫—Ä–∏—Ç–∏—á–Ω—ã–µ ‚Üí —Ç–µ–ª–µ—Ñ–æ–Ω)
‚îî‚îÄ‚îÄ Nginx reverse proxy
    ‚îÇ
    ‚Üì MQTT over WiFi
    ‚îÇ
ROOT NODE (ESP32-S3 #1)
‚îú‚îÄ‚îÄ ESP-WIFI-MESH –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä
‚îú‚îÄ‚îÄ MQTT –∫–ª–∏–µ–Ω—Ç
‚îú‚îÄ‚îÄ Node Registry
‚îú‚îÄ‚îÄ Data Router
‚îú‚îÄ‚îÄ Climate Logic (—Ä–µ–∑–µ—Ä–≤)
‚îî‚îÄ‚îÄ OTA Coordinator
    ‚îÇ
    ‚Üì ESP-WIFI-MESH
    ‚îÇ
    ‚îú‚îÄ‚Üí NODE Display (ESP32-S3 #2)
    ‚îÇ   ‚îî‚îÄ‚îÄ TFT 240x320 + LVGL + –≠–Ω–∫–æ–¥–µ—Ä
    ‚îÇ
    ‚îú‚îÄ‚Üí NODE pH/EC #1 (ESP32-S3 #3) ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ù–´–ô!
    ‚îÇ   ‚îú‚îÄ‚îÄ pH/EC –¥–∞—Ç—á–∏–∫–∏ + 5 –Ω–∞—Å–æ—Å–æ–≤
    ‚îÇ   ‚îú‚îÄ‚îÄ Adaptive PID (AI)
    ‚îÇ   ‚îú‚îÄ‚îÄ OLED 128x64 (—Å—Ç–∞—Ç—É—Å)
    ‚îÇ   ‚îú‚îÄ‚îÄ –ê–í–¢–û–ù–û–ú–ù–ê–Ø –†–ê–ë–û–¢–ê!
    ‚îÇ   ‚îú‚îÄ‚îÄ –õ–æ–∫–∞–ª—å–Ω—ã–π –±—É—Ñ–µ—Ä (1000 –∑–∞–ø–∏—Å–µ–π)
    ‚îÇ   ‚îî‚îÄ‚îÄ LED + Buzzer + –ö–Ω–æ–ø–∫–∞ MODE
    ‚îÇ
    ‚îú‚îÄ‚Üí NODE pH/EC #2...N (ESP32-S3 –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ)
    ‚îÇ   ‚îî‚îÄ‚îÄ –î–ª—è —Ä–∞–∑–Ω—ã—Ö —Ä–µ–∑–µ—Ä–≤—É–∞—Ä–æ–≤/–∑–æ–Ω
    ‚îÇ
    ‚îú‚îÄ‚Üí NODE Climate #1...N (ESP32)
    ‚îÇ   ‚îî‚îÄ‚îÄ SHT3x + CCS811 + Lux (—Ç–æ–ª—å–∫–æ –¥–∞—Ç—á–∏–∫–∏!)
    ‚îÇ
    ‚îú‚îÄ‚Üí NODE Relay #1 (ESP32)
    ‚îÇ   ‚îú‚îÄ‚îÄ 2 —Ñ–æ—Ä—Ç–æ—á–∫–∏ (–ª–∏–Ω–µ–π–Ω—ã–µ –∞–∫—Ç—É–∞—Ç–æ—Ä—ã)
    ‚îÇ   ‚îú‚îÄ‚îÄ –í–µ–Ω—Ç–∏–ª—è—Ç–æ—Ä
    ‚îÇ   ‚îî‚îÄ‚îÄ LED —Å–≤–µ—Ç (PWM 0-100%)
    ‚îÇ
    ‚îî‚îÄ‚Üí NODE Water #1...N (ESP32-C3)
        ‚îî‚îÄ‚îÄ –ù–∞—Å–æ—Å—ã + –∫–ª–∞–ø–∞–Ω—ã –≤–æ–¥—ã
```

---

## üéØ –ö–õ–Æ–ß–ï–í–´–ï –†–ï–®–ï–ù–ò–Ø

### 1. ROOT –±–µ–∑ –¥–∏—Å–ø–ª–µ—è ‚úÖ
**–†–µ—à–µ–Ω–∏–µ:** Display –≤—ã–Ω–µ—Å–µ–Ω –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π NODE  
**–ü—Ä–∏—á–∏–Ω–∞:** –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å ROOT + –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å

### 2. NODE pH/EC –∞–≤—Ç–æ–Ω–æ–º–Ω—ã–π ‚ö†Ô∏è
**–†–µ—à–µ–Ω–∏–µ:** –ü–æ–ª–Ω–∞—è –∞–≤—Ç–æ–Ω–æ–º–∏—è –ø—Ä–∏ –ø–æ—Ç–µ—Ä–µ —Å–≤—è–∑–∏  
**–ü—Ä–∏—á–∏–Ω–∞:** –†–∞—Å—Ç–µ–Ω–∏—è –ø–æ–≥–∏–±–Ω—É—Ç –µ—Å–ª–∏ pH —Å–±–æ–∏—Ç  
**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
- Timeout: 30 —Å–µ–∫ –±–µ–∑ —Å–≤—è–∑–∏ ‚Üí AUTONOMOUS —Ä–µ–∂–∏–º
- NVS —Ö—Ä–∞–Ω–∏—Ç –≤—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- Ring buffer 1000 –∑–∞–ø–∏—Å–µ–π
- OLED + LED + Buzzer –∏–Ω–¥–∏–∫–∞—Ü–∏—è
- –ö–Ω–æ–ø–∫–∞ MODE –¥–ª—è —Ä—É—á–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 3. –õ–æ–≥–∏–∫–∞ –∫–ª–∏–º–∞—Ç–∞ –Ω–∞ ROOT ‚úÖ
**–†–µ—à–µ–Ω–∏–µ:** ROOT –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ä–µ—à–µ–Ω–∏—è –æ –≤–µ–Ω—Ç–∏–ª—è—Ü–∏–∏  
**–ü—Ä–∏—á–∏–Ω–∞:** –ï—Å–ª–∏ Climate node —É–ø–∞–ª, ROOT –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç—É

### 4. PWM –¥–∏–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–≤–µ—Ç–∞ ‚úÖ
**–†–µ—à–µ–Ω–∏–µ:** PWM –∫–∞–Ω–∞–ª 5 kHz, 8 –±–∏—Ç (0-100%)  
**–ü—Ä–∏—á–∏–Ω–∞:** –ü–ª–∞–≤–Ω–∞—è —Ä–µ–≥—É–ª–∏—Ä–æ–≤–∫–∞ —è—Ä–∫–æ—Å—Ç–∏ + —ç–∫–æ–Ω–æ–º–∏—è —ç–Ω–µ—Ä–≥–∏–∏

### 5. SMS —Ç–æ–ª—å–∫–æ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ ‚úÖ
**–†–µ—à–µ–Ω–∏–µ:** SMS –ø—Ä–∏ pH < 5.0, > 8.0, EC > 3.0  
**–ü—Ä–∏—á–∏–Ω–∞:** SMS –¥–æ—Ä–æ–≥–æ, –Ω—É–∂–Ω–æ —Ç–æ–ª—å–∫–æ –¥–ª—è –∞–≤–∞—Ä–∏–π

### 6. PostgreSQL –≤—Å—è –∏—Å—Ç–æ—Ä–∏—è ‚úÖ
**–†–µ—à–µ–Ω–∏–µ:** –•—Ä–∞–Ω–∏—Ç—å –≤—Å—é —Ç–µ–ª–µ–º–µ—Ç—Ä–∏—é –±–µ–∑ —É–¥–∞–ª–µ–Ω–∏—è  
**–ü—Ä–∏—á–∏–Ω–∞:** –î–∏—Å–∫ –¥–µ—à–µ–≤—ã–π, –∞–Ω–∞–ª–∏–∑ —Ç—Ä–µ–Ω–¥–æ–≤ –≤–∞–∂–µ–Ω

---

## üì¶ SHOPPING LIST

**–ò–º–µ–µ—Ç—Å—è:**
- ‚úÖ 3√ó ESP32-S3
- ‚úÖ TFT ILI9341 240x320
- ‚úÖ –≠–Ω–∫–æ–¥–µ—Ä
- ‚úÖ –î–∞—Ç—á–∏–∫–∏ (pH, EC, SHT3x, CCS811, Lux)
- ‚úÖ –ù–∞—Å–æ—Å—ã –ø–µ—Ä–∏—Å—Ç–∞–ª—å—Ç–∏—á–µ—Å–∫–∏–µ

**–î–æ–∫—É–ø–∏—Ç—å (~$35-50):**
- 1√ó ESP32 –æ–±—ã—á–Ω—ã–π ($3-4) ‚Üí Climate
- 1√ó ESP32 –æ–±—ã—á–Ω—ã–π ($3-4) ‚Üí Relay
- 1√ó ESP32-C3 ($2-3) ‚Üí Water
- 2√ó –õ–∏–Ω–µ–π–Ω—ã–µ –∞–∫—Ç—É–∞—Ç–æ—Ä—ã 12V ($10-15 –∫–∞–∂–¥—ã–π) ‚Üí –§–æ—Ä—Ç–æ—á–∫–∏
- 1√ó OLED SSD1306 128x64 ($3-5) ‚Üí pH/EC
- 1√ó LED RGB + Buzzer + –ö–Ω–æ–ø–∫–∞ ($2-3) ‚Üí pH/EC

---

## ‚è±Ô∏è –í–†–ï–ú–Ø –†–ê–ó–†–ê–ë–û–¢–ö–ò

| –≠—Ç–∞–ø | –î–Ω–∏ | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç |
|------|-----|-----------|
| MVP (ROOT + Server + pH/EC) | 16 | üî¥ –ö—Ä–∏—Ç–∏—á–Ω–æ |
| –ü–æ–ª–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ (–≤—Å–µ —É–∑–ª—ã) | 30-35 | üü† –í—ã—Å–æ–∫–∏–π |
| –° –¥–æ–ø. —Ñ—É–Ω–∫—Ü–∏—è–º–∏ (OTA, –±–æ—Ç—ã) | 40-45 | üü° –°—Ä–µ–¥–Ω–∏–π |

**–†–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ:** 40-45 –¥–Ω–µ–π (1.5-2 –º–µ—Å—è—Ü–∞)

---

## üîß –ö–û–ú–ü–û–ù–ï–ù–¢–´ –ò–ó HYDRO1.0 (–ü–ï–†–ï–ò–°–ü–û–õ–¨–ó–£–ï–ú!)

### –ü–æ—Ä—Ç–∏—Ä—É–µ–º –ë–ï–ó –∏–∑–º–µ–Ω–µ–Ω–∏–π:
- ‚úÖ sensor_manager ‚Üí node_ph_ec
- ‚úÖ pump_manager ‚Üí node_ph_ec
- ‚úÖ adaptive_pid ‚Üí node_ph_ec
- ‚úÖ lvgl_ui ‚Üí node_display
- ‚úÖ lcd_ili9341 ‚Üí node_display
- ‚úÖ encoder ‚Üí node_display
- ‚úÖ i2c_bus ‚Üí common
- ‚úÖ config_manager ‚Üí common/node_config

### –°–æ–∑–¥–∞–µ–º –ù–û–í–û–ï:
- mesh_manager (ESP-WIFI-MESH)
- mesh_protocol (JSON)
- node_registry (—Ä–µ–µ—Å—Ç—Ä —É–∑–ª–æ–≤)
- mqtt_client (MQTT)
- data_router (–º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è)
- oled_display (SSD1306)
- connection_monitor (–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–≤—è–∑–∏)
- local_storage (–±—É—Ñ–µ—Ä –¥–∞–Ω–Ω—ã—Ö)
- climate_logic (—Ä–µ–∑–µ—Ä–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞)
- vent_actuators (–ª–∏–Ω–µ–π–Ω—ã–µ –∞–∫—Ç—É–∞—Ç–æ—Ä—ã)
- light_controller (PWM)

---

## üìö –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø –ü–õ–ê–ù–ê

### –î–ª—è AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–æ–≤ (–Ω–∞—á–Ω–∏ –∑–¥–µ—Å—å!):
1. **MESH_AI_QUICK_START.md** ‚≠ê - –ø—Ä–∞–≤–∏–ª–∞, –ø—Ä–∏–º–µ—Ä—ã, –æ—à–∏–±–∫–∏
2. **MESH_IMPLEMENTATION_PRIORITY.md** - –≤ –∫–∞–∫–æ–º –ø–æ—Ä—è–¥–∫–µ –¥–µ–ª–∞—Ç—å

### –î–µ—Ç–∞–ª–∏:
3. **MESH_HYDRO_V2_FINAL_PLAN.md** - –ø–æ–ª–Ω—ã–π –ø–ª–∞–Ω (~850 —Å—Ç—Ä–æ–∫!)
4. **MESH_ARCHITECTURE_PLAN.md** - –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
5. **MESH_PINOUT_ALL_NODES.md** - GPIO –∫–∞–∂–¥–æ–≥–æ —É–∑–ª–∞

### –ù–∞–≤–∏–≥–∞—Ü–∏—è:
6. **MESH_PROJECT_INDEX.md** - –∏–Ω–¥–µ–∫—Å –≤—Å–µ—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
7. **MESH_QUICK_SUMMARY.md** - —ç—Ç–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ (1 –º–∏–Ω—É—Ç–∞ —á—Ç–µ–Ω–∏—è)

---

## üéØ –ö–†–ò–¢–ò–ß–ù–´–ï –ü–†–ê–í–ò–õ–ê

### –î–ª—è NODE pH/EC:
```
‚ö†Ô∏è –í–°–ï–ì–î–ê –∞–≤—Ç–æ–Ω–æ–º–Ω–∞—è —Ä–∞–±–æ—Ç–∞
‚ö†Ô∏è –í–°–ï–ì–î–ê —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ NVS
‚ö†Ô∏è –í–°–ï–ì–î–ê –ª–æ–∫–∞–ª—å–Ω—ã–π –±—É—Ñ–µ—Ä
‚ö†Ô∏è –í–°–ï–ì–î–ê watchdog reset
‚ö†Ô∏è –ù–ò–ö–û–ì–î–ê –Ω–µ –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å PID
```

### –î–ª—è –≤—Å–µ—Ö —É–∑–ª–æ–≤:
```
‚úÖ JSON < 1 KB
‚úÖ NVS –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚úÖ Heartbeat –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫
‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π –∫–æ–¥ –∏–∑ hydro1.0
```

---

## ‚úÖ –ü–†–û–í–ï–†–ö–ê –ì–û–¢–û–í–ù–û–°–¢–ò

### –ü–µ—Ä–µ–¥ —Å—Ç–∞—Ä—Ç–æ–º:

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
- [x] –ü–ª–∞–Ω –∏–∑—É—á–µ–Ω
- [x] –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø–æ–Ω—è—Ç–Ω–∞
- [x] GPIO —Ä–∞—Å–ø–∏–Ω–æ–≤–∫–∞ –∏–∑–≤–µ—Å—Ç–Ω–∞
- [x] –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã

**–û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ:**
- [x] 3√ó ESP32-S3 –µ—Å—Ç—å
- [ ] –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ ESP32/C3 (–¥–æ–∫—É–ø–∏—Ç—å)
- [ ] OLED SSD1306 (–¥–æ–∫—É–ø–∏—Ç—å)
- [ ] –õ–∏–Ω–µ–π–Ω—ã–µ –∞–∫—Ç—É–∞—Ç–æ—Ä—ã (–¥–æ–∫—É–ø–∏—Ç—å)

**–ü–û:**
- [ ] ESP-IDF v5.5.1
- [ ] PHP 8.2 + Laravel
- [ ] Node.js + Vue.js
- [ ] PostgreSQL 15
- [ ] Mosquitto MQTT

---

## üöÄ –°–õ–ï–î–£–Æ–©–ò–ô –®–ê–ì

**–ö–æ–≥–¥–∞ –±—É–¥–µ—Ç–µ –≥–æ—Ç–æ–≤—ã –Ω–∞—á–∞—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é:**

1. –ü—Ä–æ—á–∏—Ç–∞–π—Ç–µ **MESH_HYDRO_V2_FINAL_PLAN.md**
2. –ü—Ä–æ—á–∏—Ç–∞–π—Ç–µ **MESH_AI_QUICK_START.md**
3. –ù–∞—á–Ω–∏—Ç–µ —Å **–§–∞–∑—ã 1** (–±–∞–∑–æ–≤–∞—è mesh-—Å–µ—Ç—å)
4. –°–ª–µ–¥—É–π—Ç–µ **MESH_IMPLEMENTATION_PRIORITY.md**

**–ü–µ—Ä–≤–∞—è –∑–∞–¥–∞—á–∞:** –°–æ–∑–¥–∞—Ç—å `common/mesh_manager`

---

## üìû –ö–û–ù–¢–ê–ö–¢–´

**–ü—Ä–æ–µ–∫—Ç:** Hydro Team  
**–ë–∞–∑–∞:** hydro1.0 (c:\Users\admin\2\hydro1.0)  
**–ù–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç:** mesh_hydro_v2 (—Å–æ–∑–¥–∞—Ç—å –≤ c:\Users\admin\2\)

---

**–ü–õ–ê–ù –ü–û–õ–ù–û–°–¢–¨–Æ –ì–û–¢–û–í –ö –†–ï–ê–õ–ò–ó–ê–¶–ò–ò!** ‚ú®üöÄ

**–£–¥–∞—á–∏ —Å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–æ–π!** üå±

